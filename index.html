<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üõí ùóïùóπùóÆùó∞ùó∏ùóóùòá ùó¶ùòÅùóºùóøùó≤ üéÆ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Reset e vari√°veis CSS */
        :root {
            --primary: #8a2be2;
            --primary-dark: #6a1cb0;
            --secondary: #00ff88;
            --dark: #0a0a0a;
            --darker: #050505;
            --light: #f8f9fa;
            --gray: #6c757d;
            --success: #28a745;
            --warning: #ffc107;
            --danger: #dc3545;
            --border-radius: 8px;
            --box-shadow: 0 4px 15px rgba(138, 43, 226, 0.2);
            --transition: all 0.3s ease;
            --gamer-gradient: linear-gradient(135deg, #8a2be2, #00ff88);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #0f0f0f;
            color: #fff;
            line-height: 1.6;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(138, 43, 226, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(0, 255, 136, 0.1) 0%, transparent 20%);
            min-height: 100vh;
            transition: background 0.6s ease, background-image 0.6s ease;
            background-size: cover, cover, cover;
            background-attachment: fixed, fixed, fixed;
        }
        
        a {
            text-decoration: none;
            color: inherit;
        }
        
        ul {
            list-style: none;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        .btn {
            display: inline-block;
            padding: 12px 24px;
            background: var(--gamer-gradient);
            color: white;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 0.9rem;
            position: relative;
            overflow: hidden;
            z-index: 1;
        }
        
        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: 0.5s;
            z-index: -1;
        }
        
        .btn:hover::before {
            left: 100%;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(138, 43, 226, 0.4);
        }
        
        .btn-secondary {
            background: #222;
            border: 1px solid var(--primary);
        }
        
        .btn-secondary:hover {
            background: var(--primary);
        }
        
        .btn-success {
            background: var(--success);
        }
        
        .btn-danger {
            background: var(--danger);
        }
        
        /* Header atualizado com cupom */
        header {
            background-color: rgba(10, 10, 10, 0.95);
            padding: 15px 0;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            position: sticky;
            top: 0;
            z-index: 1000;
            border-bottom: 2px solid var(--primary);
        }
        
        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.8rem;
            font-weight: 700;
            background: var(--gamer-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 10px rgba(138, 43, 226, 0.5);
        }
        
        .logo i {
            font-size: 2rem;
        }
        
        /* Cupom no header - deixado mais descritivo conforme solicitado */
        .header-coupon {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: #000;
            padding: 8px 18px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9rem;
            margin-left: 20px;
            animation: pulse 2s infinite;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
            max-width: 420px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .nav-links {
            display: flex;
            gap: 25px;
        }
        
        .nav-links a {
            font-weight: 600;
            transition: var(--transition);
            position: relative;
            padding: 5px 0;
        }
        
        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--secondary);
            transition: var(--transition);
        }
        
        .nav-links a:hover {
            color: var(--secondary);
        }
        
        .nav-links a:hover::after {
            width: 100%;
        }
        
        .header-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
            color: var(--secondary);
        }
        
        /* Bot√µes de redes sociais no header */
        .social-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #222;
            color: white;
            font-size: 1.2rem;
            transition: var(--transition);
            border: 2px solid transparent;
        }
        
        .social-btn:hover {
            transform: translateY(-3px);
            border-color: var(--primary);
        }
        
        .discord-btn {
            background: #5865F2;
        }
        
        .instagram-btn {
            background: linear-gradient(45deg, #405DE6, #833AB4, #C13584, #E1306C, #FD1D1D);
        }
        
        .whatsapp-btn {
            background: #25D366;
        }

        /* Bot√£o de engrenagem (tema) - fica ao lado do logout */
        .theme-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #222;
            color: white;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border: 2px solid transparent;
            transition: var(--transition);
        }
        .theme-btn:hover {
            transform: translateY(-3px);
            border-color: var(--secondary);
            background: linear-gradient(135deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
        }
        
        .cart-icon {
            position: relative;
            font-size: 1.3rem;
            cursor: pointer;
            color: var(--secondary);
            transition: var(--transition);
        }
        
        .cart-icon:hover {
            transform: scale(1.1);
        }
        
        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: var(--primary);
            color: white;
            font-size: 0.7rem;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            border: 2px solid var(--dark);
        }
        
        .logout-btn {
            background: transparent;
            border: 1px solid var(--danger);
            color: var(--danger);
            padding: 8px 15px;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
        }
        
        .logout-btn:hover {
            background: var(--danger);
            color: white;
        }
        
        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        /* Telas de Login e Cadastro */
        .auth-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--darker);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            transition: var(--transition);
        }
        
        .auth-screen.hidden {
            opacity: 0;
            visibility: hidden;
        }
        
        .auth-container {
            background: rgba(20, 20, 20, 0.95);
            border-radius: var(--border-radius);
            width: 90%;
            max-width: 400px;
            padding: 40px 30px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
            border: 1px solid var(--primary);
            text-align: center;
        }
        
        .auth-container h2 {
            margin-bottom: 30px;
            background: var(--gamer-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 2rem;
        }
        
        .auth-form .form-group {
            margin-bottom: 20px;
            text-align: left;
        }
        
        .auth-form label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--secondary);
        }
        
        .auth-form input {
            width: 100%;
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(138, 43, 226, 0.5);
            border-radius: var(--border-radius);
            color: white;
            font-size: 1rem;
            transition: var(--transition);
        }
        
        .auth-form input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 10px rgba(138, 43, 226, 0.5);
        }
        
        .auth-error {
            color: var(--danger);
            margin-top: 10px;
            font-size: 0.9rem;
            display: none;
        }
        
        .auth-switch {
            margin-top: 20px;
            color: #aaa;
            font-size: 0.9rem;
        }
        
        .auth-switch a {
            color: var(--primary);
            font-weight: 600;
            cursor: pointer;
        }
        
        .auth-switch a:hover {
            text-decoration: underline;
        }
        
        /* Hero Section atualizada */
        .hero {
            padding: 80px 0;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, rgba(138, 43, 226, 0.1) 0%, transparent 70%);
            z-index: -1;
        }
        
        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 20px;
            background: var(--gamer-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 20px rgba(138, 43, 226, 0.5);
        }
        
        .hero p {
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto 40px;
            color: #ccc;
        }
        
        /* Bot√£o Explorar Produtos centralizado */
        .hero-actions {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
        }
        
        /* Categories Section */
        .categories-section {
            padding: 60px 0;
        }
        
        .section-title {
            text-align: center;
            margin-bottom: 50px;
            font-size: 2.5rem;
            position: relative;
        }
        
        .section-title span {
            background: var(--gamer-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .section-title::after {
            content: '';
            display: block;
            width: 100px;
            height: 4px;
            background: var(--gamer-gradient);
            margin: 15px auto;
            border-radius: 2px;
        }
        
        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 25px;
        }
        
        .category-card {
            background: rgba(30, 30, 30, 0.8);
            border-radius: var(--border-radius);
            padding: 30px 20px;
            text-align: center;
            box-shadow: var(--box-shadow);
            transition: var(--transition);
            cursor: pointer;
            border: 1px solid transparent;
            position: relative;
            overflow: hidden;
        }
        
        .category-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: var(--gamer-gradient);
        }
        
        .category-card:hover {
            transform: translateY(-10px);
            border-color: var(--primary);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
        }
        
        .category-icon {
            font-size: 3.5rem;
            margin-bottom: 20px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .category-title {
            font-weight: 700;
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: var(--secondary);
        }
        
        /* Products Section */
        .products-section {
            padding: 40px 0 80px;
            display: none;
        }
        
        .back-to-categories {
            margin-bottom: 20px;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            color: var(--primary);
            font-weight: 600;
            cursor: pointer;
            padding: 10px 20px;
            background: rgba(138, 43, 226, 0.1);
            border-radius: var(--border-radius);
            transition: var(--transition);
        }
        
        .back-to-categories:hover {
            background: rgba(138, 43, 226, 0.2);
            transform: translateX(-5px);
        }
        
        /* Subcategorias */
        .subcategories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin: 40px 0;
        }
        
        .subcategory-card {
            background: rgba(40, 40, 40, 0.9);
            border-radius: var(--border-radius);
            padding: 25px 15px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            border: 2px solid transparent;
        }
        
        .subcategory-card:hover {
            border-color: var(--primary);
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(138, 43, 226, 0.3);
        }
        
        .subcategory-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: var(--secondary);
        }
        
        .subcategory-title {
            font-weight: 600;
            font-size: 1.2rem;
            color: white;
        }
        
        /* Pagina√ß√£o */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 30px 0;
            gap: 10px;
        }
        
        .page-btn {
            background: rgba(138, 43, 226, 0.2);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-weight: bold;
            transition: var(--transition);
        }
        
        .page-btn.active {
            background: var(--primary);
        }
        
        .page-btn:hover:not(.active) {
            background: rgba(138, 43, 226, 0.4);
        }
        
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }
        
        .product-card {
            background: rgba(30, 30, 30, 0.9);
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--box-shadow);
            transition: var(--transition);
            border: 1px solid rgba(138, 43, 226, 0.3);
            position: relative;
            display: flex;
            flex-direction: column;
            min-height: 100%;
        }
        
        .product-card:hover {
            transform: translateY(-10px);
            border-color: var(--primary);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4);
        }
        
        .product-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--primary);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            z-index: 2;
        }
        
        .product-image {
            height: 180px;
            background: linear-gradient(135deg, rgba(138, 43, 226, 0.1), rgba(0, 255, 136, 0.1));
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            padding: 20px;
            position: relative;
        }
        
        .product-image::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, transparent 50%, rgba(10, 10, 10, 0.8) 100%);
        }
        
        .product-image img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            z-index: 1;
            position: relative;
            border-radius: 6px;
        }
        
        .product-image span {
            z-index: 1;
            position: relative;
        }
        
        .product-info {
            padding: 25px;
            position: relative;
            z-index: 2;
            display: flex;
            flex-direction: column;
            flex: 1;
        }
        
        .product-category {
            color: var(--secondary);
            font-size: 0.9rem;
            margin-bottom: 5px;
            font-weight: 600;
        }
        
        .product-title {
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 1.2rem;
            max-height: 60px;
            overflow: hidden;
        }
        
        .product-description {
            font-size: 0.9rem;
            color: #aaa;
            margin-bottom: 15px;
            max-height: 80px;
            overflow: auto;
            padding-right: 5px;
        }
        
        .product-description::-webkit-scrollbar {
            width: 4px;
        }
        
        .product-description::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .product-description::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 4px;
        }
        
        .product-price {
            color: var(--secondary);
            font-weight: 700;
            font-size: 1.5rem;
            margin-bottom: 20px;
        }
        
        .product-stock {
            font-size: 0.9rem;
            color: #aaa;
            margin-bottom: 15px;
        }
        
        .product-stock.in-stock {
            color: var(--secondary);
        }
        
        .product-stock.low-stock {
            color: var(--warning);
        }
        
        .product-actions {
            display: flex;
            gap: 10px;
            margin-top: auto;
        }
        
        .product-actions .btn {
            flex: 1;
            text-align: center;
            padding: 12px 10px;
            font-size: 0.9rem;
        }
        
        /* Cupom Section */
        .coupon-section {
            background: rgba(30, 30, 30, 0.8);
            padding: 20px;
            border-radius: var(--border-radius);
            margin-bottom: 30px;
            border: 1px solid var(--primary);
        }
        
        .coupon-form {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .coupon-form input {
            flex: 1;
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(138, 43, 226, 0.5);
            border-radius: var(--border-radius);
            color: white;
        }
        
        .coupon-badge {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: #000;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-left: 5px;
        }
        
        .cupom-products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        /* Admin Panel ATUALIZADO */
        .admin-panel {
            background: rgba(20, 20, 20, 0.95);
            border-radius: var(--border-radius);
            padding: 30px;
            margin: 30px auto;
            max-width: 1200px;
            border: 2px solid var(--primary);
        }
        
        .admin-panel h2 {
            margin-bottom: 30px;
            text-align: center;
            background: var(--gamer-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .admin-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 1px solid rgba(138, 43, 226, 0.3);
            padding-bottom: 10px;
            flex-wrap: wrap;
        }
        
        .admin-tab {
            background: transparent;
            border: none;
            color: #aaa;
            padding: 10px 20px;
            cursor: pointer;
            border-radius: var(--border-radius);
            transition: var(--transition);
        }
        
        .admin-tab.active {
            background: var(--primary);
            color: white;
        }
        
        .admin-content {
            display: none;
        }
        
        .admin-content.active {
            display: block;
        }
        
        .orders-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .orders-table th {
            background: rgba(138, 43, 226, 0.2);
            padding: 15px;
            text-align: left;
            border-bottom: 2px solid var(--primary);
        }
        
        .orders-table td {
            padding: 12px 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .order-status {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .status-pending {
            background: rgba(255, 193, 7, 0.2);
            color: #ffc107;
        }
        
        .status-completed {
            background: rgba(40, 167, 69, 0.2);
            color: #28a745;
        }
        
        .status-cancelled {
            background: rgba(220, 53, 69, 0.2);
            color: #dc3545;
        }
        
        .chat-messages {
            height: 300px;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.3);
            border-radius: var(--border-radius);
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(138, 43, 226, 0.3);
        }
        
        .chat-message {
            margin-bottom: 15px;
            padding: 10px 15px;
            border-radius: var(--border-radius);
            max-width: 80%;
        }
        
        .message-admin {
            background: rgba(138, 43, 226, 0.2);
            margin-left: auto;
        }
        
        .message-user {
            background: rgba(0, 255, 136, 0.1);
        }
        
        .chat-input {
            display: flex;
            gap: 10px;
        }
        
        .chat-input input {
            flex: 1;
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(138, 43, 226, 0.5);
            border-radius: var(--border-radius);
            color: white;
        }
        
        /* Sistema de usu√°rios no admin */
        .users-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .users-table th {
            background: rgba(138, 43, 226, 0.2);
            padding: 15px;
            text-align: left;
            border-bottom: 2px solid var(--primary);
        }
        
        .users-table td {
            padding: 12px 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .user-role {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .role-admin {
            background: rgba(255, 215, 0, 0.2);
            color: #FFD700;
        }
        
        .role-user {
            background: rgba(0, 255, 136, 0.2);
            color: #00ff88;
        }
        
        /* Formul√°rio de cria√ß√£o de cupom */
        .coupon-form-admin {
            background: rgba(30, 30, 30, 0.7);
            padding: 20px;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
        }
        
        .form-row {
            display: flex;
            gap: 20px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .form-group {
            flex: 1;
            min-width: 200px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--secondary);
            font-weight: 600;
        }
        
        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(138, 43, 226, 0.5);
            border-radius: var(--border-radius);
            color: white;
        }
        
        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 10px rgba(138, 43, 226, 0.5);
        }
        
        /* Sistema de autoriza√ß√£o de cupons */
        .authorized-users {
            margin-top: 10px;
            padding: 10px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: var(--border-radius);
        }
        
        .authorized-user {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--border-radius);
            margin-bottom: 5px;
        }
        
        /* Carrinho de Compras */
        .cart-modal {
            position: fixed;
            top: 0;
            right: -450px;
            width: 420px;
            height: 100%;
            background: rgba(15, 15, 15, 0.98);
            box-shadow: -5px 0 25px rgba(0, 0, 0, 0.7);
            transition: var(--transition);
            z-index: 1001;
            display: flex;
            flex-direction: column;
            border-left: 2px solid var(--primary);
        }
        
        .cart-modal.active {
            right: 0;
        }
        
        .cart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 25px;
            border-bottom: 1px solid rgba(138, 43, 226, 0.3);
        }
        
        .cart-header h3 {
            font-size: 1.8rem;
            background: var(--gamer-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .close-cart {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--secondary);
            transition: var(--transition);
        }
        
        .close-cart:hover {
            color: var(--primary);
            transform: rotate(90deg);
        }
        
        .cart-items {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }
        
        .cart-item {
            display: flex;
            align-items: center;
            padding: 20px 0;
            border-bottom: 1px solid rgba(138, 43, 226, 0.1);
        }
        
        .cart-item-image {
            width: 70px;
            height: 70px;
            background: rgba(138, 43, 226, 0.1);
            border-radius: var(--border-radius);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 1.8rem;
        }
        
        .cart-item-info {
            flex: 1;
        }
        
        .cart-item-title {
            font-weight: 600;
            font-size: 1rem;
            margin-bottom: 5px;
        }
        
        .cart-item-price {
            color: var(--secondary);
            font-weight: 700;
        }
        
        .cart-item-quantity {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 8px;
        }
        
        .quantity-btn {
            background: rgba(138, 43, 226, 0.2);
            border: none;
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .cart-item-remove {
            background: none;
            border: none;
            color: var(--danger);
            cursor: pointer;
            font-size: 1.2rem;
            margin-left: 10px;
        }
        
        .cart-footer {
            padding: 25px;
            border-top: 1px solid rgba(138, 43, 226, 0.3);
        }
        
        .cart-total {
            display: flex;
            justify-content: space-between;
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--secondary);
        }
        
        .cart-coupon {
            background: rgba(30, 30, 30, 0.7);
            padding: 15px;
            border-radius: var(--border-radius);
            margin-bottom: 15px;
            border: 1px solid rgba(138, 43, 226, 0.3);
        }
        
        .cart-coupon h4 {
            margin-bottom: 10px;
            color: var(--secondary);
        }
        
        .cart-coupon-input {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .cart-coupon-input input {
            flex: 1;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(138, 43, 226, 0.5);
            border-radius: var(--border-radius);
            color: white;
        }
        
        .coupon-message {
            font-size: 0.9rem;
            margin-top: 5px;
        }
        
        .coupon-success {
            color: var(--success);
        }
        
        .coupon-error {
            color: var(--danger);
        }
        
        .cart-discount {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            color: #FFD700;
            font-weight: 600;
        }
        
        .cart-final-total {
            display: flex;
            justify-content: space-between;
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 25px;
            color: var(--secondary);
            border-top: 2px solid var(--primary);
            padding-top: 10px;
        }
        
        .cart-actions {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .cart-actions .btn {
            width: 100%;
            text-align: center;
        }
        
        .empty-cart-message {
            text-align: center;
            padding: 60px 20px;
            color: #777;
        }
        
        .empty-cart-message i {
            font-size: 4rem;
            margin-bottom: 20px;
            color: rgba(138, 43, 226, 0.3);
        }
        
        /* Modal de Pagamento ATUALIZADO */
        .checkout-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1002;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }
        
        .checkout-modal.active {
            opacity: 1;
            visibility: visible;
        }
        
        .checkout-content {
            background: rgba(20, 20, 20, 0.95);
            border-radius: var(--border-radius);
            width: 90%;
            max-width: 600px;
            padding: 40px 30px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.8);
            border: 2px solid var(--primary);
            position: relative;

            /* Tornar scroll√°vel para caber todo o conte√∫do na tela */
            max-height: 85vh;
            overflow-y: auto;
        }
        
        .close-checkout {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--secondary);
        }
        
        .close-checkout:hover {
            color: var(--primary);
        }
        
        .checkout-content h2 {
            margin-bottom: 25px;
            text-align: center;
            background: var(--gamer-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 2.2rem;
        }
        
        .checkout-content h3 {
            margin: 25px 0 15px;
            color: var(--secondary);
            font-size: 1.3rem;
        }
        
        .order-summary {
            background: rgba(30, 30, 30, 0.7);
            padding: 20px;
            border-radius: var(--border-radius);
            margin-bottom: 25px;
            border-left: 4px solid var(--primary);
        }
        
        .order-summary h4 {
            margin-bottom: 15px;
            color: var(--secondary);
        }
        
        .order-items {
            max-height: 200px;
            overflow-y: auto;
            margin-bottom: 15px;
        }
        
        .order-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .order-discount {
            display: flex;
            justify-content: space-between;
            color: #FFD700;
            margin: 5px 0;
        }
        
        .order-total {
            display: flex;
            justify-content: space-between;
            font-weight: bold;
            font-size: 1.2rem;
            margin-top: 10px;
            color: var(--secondary);
        }
        
        .payment-instructions {
            background: rgba(30, 30, 30, 0.7);
            padding: 20px;
            border-radius: var(--border-radius);
            margin: 20px 0;
            border-left: 4px solid var(--secondary);

            /* permitir scroll interno caso necess√°rio */
            max-height: 260px;
            overflow-y: auto;
        }
        
        .payment-instructions p {
            margin-bottom: 10px;
        }
        
        .pix-key {
            background: rgba(0, 0, 0, 0.5);
            padding: 15px;
            border-radius: var(--border-radius);
            text-align: center;
            margin: 15px 0;
            border: 1px dashed var(--primary);
            font-weight: bold;
            font-size: 1.1rem;
            word-break: break-all;
        }
        
        /* Op√ß√µes de envio de comprovante ATUALIZADO */
        .receipt-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin: 25px 0;
        }
        
        .receipt-option {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 20px;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            border: 2px solid transparent;
            background: rgba(40, 40, 40, 0.7);
        }
        
        .receipt-option:hover {
            transform: translateY(-3px);
            border-color: var(--primary);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
        }
        
        .receipt-option.whatsapp {
            border-left: 4px solid #25D366;
        }
        
        .receipt-option.instagram {
            border-left: 4px solid #E1306C;
        }
        
        .receipt-option.discord {
            border-left: 4px solid #5865F2;
        }
        
        .receipt-option-icon {
            font-size: 2rem;
        }
        
        .receipt-option-info {
            flex: 1;
        }
        
        .receipt-option-info h4 {
            margin-bottom: 5px;
            color: var(--secondary);
        }
        
        .receipt-option-info p {
            font-size: 0.9rem;
            color: #aaa;
        }
        
        .copy-message-container {
            margin-top: 20px;
            display: none;
        }
        
        .copy-message-box {
            background: rgba(30, 30, 30, 0.8);
            padding: 15px;
            border-radius: var(--border-radius);
            border: 1px dashed var(--primary);
            margin: 10px 0;
            font-size: 0.9rem;
            word-break: break-all;
            max-height: 150px;
            overflow-y: auto;
        }
        
        .copy-buttons {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .copy-btn {
            flex: 1;
            padding: 10px;
            border-radius: var(--border-radius);
            border: none;
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
        }
        
        .copy-btn.copy {
            background: var(--primary);
            color: white;
        }
        
        .copy-btn.copy:hover {
            background: var(--primary-dark);
        }
        
        .copy-btn.open {
            background: var(--secondary);
            color: #000;
        }
        
        .copy-btn.open:hover {
            background: #00cc77;
        }
        
        /* Categoria Escolher Jogo */
        .game-selection-container {
            background: rgba(30, 30, 30, 0.9);
            padding: 30px;
            border-radius: var(--border-radius);
            margin-top: 30px;
            border: 1px solid var(--primary);
        }
        
        .game-search {
            margin-bottom: 30px;
        }
        
        .game-search input {
            width: 100%;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--primary);
            border-radius: var(--border-radius);
            color: white;
            font-size: 1rem;
        }
        
        .suggested-games {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
        }
        
        .suggested-game {
            background: rgba(40, 40, 40, 0.9);
            padding: 20px;
            border-radius: var(--border-radius);
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            border: 1px solid transparent;
        }
        
        .suggested-game:hover {
            border-color: var(--primary);
            transform: translateY(-5px);
        }
        
        .suggested-game i {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: var(--secondary);
        }
        
        /* Estilo para categorias especiais */
        .special-category {
            background: linear-gradient(135deg, rgba(255, 107, 0, 0.1), rgba(255, 215, 0, 0.1)) !important;
            border: 1px solid rgba(255, 107, 0, 0.5) !important;
        }
        
        .special-category .category-icon {
            color: #FF6B00 !important;
        }
        
        .special-category .category-title {
            color: #FFA500 !important;
        }
        
        /* Overlay */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }
        
        .overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        /* CHATBOT STYLES ATUALIZADO */
        .chatbot-container {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 9999;
        }
        
        .chatbot-toggle {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--gamer-gradient);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(138, 43, 226, 0.5);
            transition: var(--transition);
            border: 3px solid var(--dark);
        }
        
        .chatbot-toggle i {
            /* √çcone de mensagem */
        }
        
        .chatbot-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(138, 43, 226, 0.7);
        }
        
        .chatbot-toggle.active {
            transform: rotate(360deg);
        }
        
        .chatbot-window {
            position: absolute;
            bottom: 80px;
            right: 0;
            width: 380px;
            height: 500px;
            background: rgba(15, 15, 15, 0.98);
            border-radius: 15px;
            box-shadow: 0 10px 35px rgba(0, 0, 0, 0.7);
            display: flex;
            flex-direction: column;
            border: 2px solid var(--primary);
            overflow: hidden;
            opacity: 0;
            visibility: hidden;
            transform: translateY(20px);
            transition: var(--transition);
        }
        
        .chatbot-window.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        
        .chatbot-header {
            background: var(--gamer-gradient);
            padding: 20px;
            text-align: center;
            position: relative;
        }
        
        .chatbot-header h3 {
            color: white;
            font-size: 1.3rem;
            margin: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .close-chatbot {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .close-chatbot:hover {
            transform: rotate(90deg);
        }
        
        .chatbot-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .chatbot-typing {
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 10px;
            background: rgba(138, 43, 226, 0.1);
            border-radius: var(--border-radius);
            margin-bottom: 10px;
            align-self: flex-start;
            max-width: 80%;
        }
        
        .typing-dot {
            width: 8px;
            height: 8px;
            background: var(--secondary);
            border-radius: 50%;
            animation: typing 1.5s infinite;
        }
        
        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }
        
        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-10px); }
        }
        
        .message {
            padding: 12px 16px;
            border-radius: 18px;
            max-width: 85%;
            word-wrap: break-word;
            line-height: 1.4;
        }
        
        .bot-message {
            background: rgba(138, 43, 226, 0.2);
            align-self: flex-start;
            border-bottom-left-radius: 5px;
        }
        
        .user-message {
            background: rgba(0, 255, 136, 0.15);
            align-self: flex-end;
            border-bottom-right-radius: 5px;
        }
        
        /* REMOVIDO: quick-reply styles */
        
        .chatbot-input {
            padding: 15px;
            border-top: 1px solid rgba(138, 43, 226, 0.3);
            display: flex;
            gap: 10px;
        }
        
        .chatbot-input input {
            flex: 1;
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(138, 43, 226, 0.5);
            border-radius: var(--border-radius);
            color: white;
            font-size: 0.95rem;
        }
        
        .chatbot-input button {
            background: var(--gamer-gradient);
            border: none;
            border-radius: var(--border-radius);
            color: white;
            width: 45px;
            cursor: pointer;
            font-size: 1.2rem;
            transition: var(--transition);
        }
        
        .chatbot-input button:hover {
            transform: translateY(-2px);
        }
        
        /* Op√ß√µes de contato no chatbot (para envio de comprovante) */
        .contact-option {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--border-radius);
            margin: 8px 0;
            cursor: pointer;
            transition: var(--transition);
            border: 1px solid transparent;
        }
        
        .contact-option:hover {
            background: rgba(138, 43, 226, 0.1);
            border-color: var(--primary);
            transform: translateX(5px);
        }
        
        .contact-option i {
            font-size: 1.2rem;
            width: 30px;
        }
        
        .contact-option.whatsapp i {
            color: #25D366;
        }
        
        .contact-option.instagram i {
            color: #E1306C;
        }
        
        .contact-option.discord i {
            color: #5865F2;
        }
        
        .contact-option.assistant i {
            color: var(--secondary);
        }
        
        .copy-message {
            background: rgba(30, 30, 30, 0.8);
            padding: 10px;
            border-radius: var(--border-radius);
            border: 1px dashed var(--primary);
            margin: 10px 0;
            font-size: 0.9rem;
            word-break: break-all;
        }
        
        /* Ocultar elemento sublinhado azul */
        .sublinhado-azil,
        [class*="sublinhado"],
        [class*="underline"],
        .texto-azil-circulado,
        a.blue-underline,
        a[href="#"] {
            display: none !important;
            visibility: hidden !important;
        }
        
        /* THEME MODAL / PERSONALIZA√á√ÉO */
        .theme-modal {
            position: fixed;
            top: 50%;
            right: 40px;
            transform: translateY(-50%);
            width: 360px;
            background: rgba(18,18,18,0.98);
            border: 2px solid var(--primary);
            border-radius: 12px;
            padding: 20px;
            z-index: 1100;
            box-shadow: 0 20px 50px rgba(0,0,0,0.6);
            display: none;
            transition: var(--transition);
        }
        .theme-modal.active {
            display: block;
        }
        .theme-modal h4 { margin-bottom: 10px; color: var(--secondary); }
        .theme-row { display:flex; gap:10px; margin-bottom:10px; align-items:center; }
        .theme-row label { font-size:0.9rem; color:#ddd; min-width:110px; }
        .theme-row input[type="color"], .theme-row input[type="text"], .theme-row input[type="file"] {
            flex:1; padding:8px; border-radius:8px; border:1px solid rgba(255,255,255,0.06); background:rgba(255,255,255,0.03); color:#fff;
        }
        .theme-presets { display:flex; gap:8px; margin-top:8px; flex-wrap:wrap; }
        .preset { width:48px; height:32px; border-radius:6px; cursor:pointer; border:2px solid transparent; }
        .theme-actions { display:flex; gap:8px; margin-top:12px; }
        .theme-note { font-size:0.85rem; color:#999; margin-top:8px; }

        /* Responsividade */
        @media (max-width: 992px) {
            .nav-links {
                gap: 15px;
            }
            
            .hero h1 {
                font-size: 2.8rem;
            }
            
            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            }
            
            .header-actions {
                gap: 10px;
            }
            
            .social-btn {
                width: 36px;
                height: 36px;
                font-size: 1.1rem;
            }
            
            .chatbot-window {
                width: 350px;
                height: 450px;
            }
            
            .header-coupon {
                margin-left: 10px;
                font-size: 0.8rem;
                padding: 5px 12px;
            }
        }
        
        @media (max-width: 768px) {
            .mobile-menu-btn {
                display: block;
            }
            
            .nav-links {
                position: fixed;
                top: 70px;
                left: -100%;
                flex-direction: column;
                background: rgba(10, 10, 10, 0.98);
                width: 100%;
                padding: 30px 20px;
                box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
                transition: var(--transition);
                z-index: 999;
                border-top: 2px solid var(--primary);
                border-bottom: 2px solid var(--primary);
            }
            
            .nav-links.active {
                left: 0;
            }
            
            .hero h1 {
                font-size: 2.3rem;
            }
            
            .hero p {
                font-size: 1rem;
            }
            
            .cart-modal {
                width: 100%;
                right: -100%;
            }
            
            .categories-grid {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }
            
            .header-actions {
                flex-wrap: wrap;
                justify-content: flex-end;
                gap: 8px;
            }
            
            .user-info {
                order: 1;
                width: 100%;
                justify-content: flex-end;
                margin-bottom: 5px;
            }
            
            .social-btn {
                width: 34px;
                height: 34px;
                font-size: 1rem;
            }
            
            .cart-icon {
                font-size: 1.2rem;
            }
            
            .logout-btn {
                padding: 6px 12px;
                font-size: 0.9rem;
            }
            
            .chatbot-container {
                bottom: 20px;
                right: 20px;
            }
            
            .chatbot-window {
                width: 320px;
                height: 420px;
                right: -10px;
            }
            
            .header-coupon {
                display: none; /* Esconder cupom no mobile */
            }
            
            .hero-actions {
                flex-direction: column;
                align-items: center;
            }
        }
        
        @media (max-width: 576px) {
            .header-container {
                flex-wrap: wrap;
            }
            
            .logo {
                font-size: 1.5rem;
            }
            
            .hero {
                padding: 50px 0;
            }
            
            .hero h1 {
                font-size: 2rem;
            }
            
            .categories-grid {
                grid-template-columns: 1fr;
            }
            
            .products-grid {
                grid-template-columns: 1fr;
            }
            
            .product-actions {
                flex-direction: column;
            }
            
            .checkout-content {
                padding: 30px 20px;
            }
            
            .header-actions {
                gap: 6px;
            }
            
            .social-btn {
                width: 32px;
                height: 32px;
                font-size: 0.9rem;
            }
            
            .chatbot-container {
                bottom: 15px;
                right: 15px;
            }
            
            .chatbot-toggle {
                width: 50px;
                height: 50px;
                font-size: 1.3rem;
            }
            
            .chatbot-window {
                width: 300px;
                height: 400px;
                right: -15px;
            }
        }
    </style>
</head>
<body>
    <!-- Tela de Login -->
    <div class="auth-screen" id="login-screen">
        <div class="auth-container" id="login-container">
            <h2>BlackDz Store</h2>
            <p style="margin-bottom: 30px; color: #aaa;">Fa√ßa login para continuar</p>
            
            <form class="auth-form" id="login-form">
                <div class="form-group">
                    <label for="username">Usu√°rio</label>
                    <input type="text" id="username" placeholder="Digite seu usu√°rio" required>
                </div>
                
                <div class="form-group">
                    <label for="password">Senha</label>
                    <input type="password" id="password" placeholder="Digite sua senha" required>
                </div>
                
                <div class="auth-error" id="login-error">
                    Usu√°rio ou senha incorretos!
                </div>
                
                <button type="submit" class="btn" style="width: 100%; margin-top: 20px;">
                    <i class="fas fa-sign-in-alt"></i> Entrar
                </button>
            </form>
            
            <div class="auth-switch">
                N√£o tem conta? <a id="go-to-register">Cadastre-se aqui</a>
            </div>
        </div>
    </div>

    <!-- Tela de Cadastro (separada) -->
    <div class="auth-screen hidden" id="register-screen">
        <div class="auth-container" id="register-container">
            <h2>Criar Conta</h2>
            <p style="margin-bottom: 30px; color: #aaa;">Preencha os dados para criar sua conta</p>
            
            <form class="auth-form" id="register-form">
                <div class="form-group">
                    <label for="reg-username">Usu√°rio</label>
                    <input type="text" id="reg-username" placeholder="Escolha um nome de usu√°rio" required>
                </div>
                
                <div class="form-group">
                    <label for="reg-email">Email</label>
                    <input type="email" id="reg-email" placeholder="Digite seu email" required>
                </div>
                
                <div class="form-group">
                    <label for="reg-password">Senha</label>
                    <input type="password" id="reg-password" placeholder="Crie uma senha (m√≠nimo 6 caracteres)" required>
                </div>
                
                <div class="form-group">
                    <label for="reg-confirm-password">Confirmar Senha</label>
                    <input type="password" id="reg-confirm-password" placeholder="Confirme sua senha" required>
                </div>
                
                <div class="auth-error" id="register-error">
                    As senhas n√£o coincidem!
                </div>
                
                <button type="submit" class="btn" style="width: 100%; margin-top: 20px;">
                    <i class="fas fa-user-plus"></i> Criar Conta
                </button>
            </form>
            
            <div class="auth-switch">
                J√° tem conta? <a id="go-to-login">Fa√ßa login</a>
            </div>
        </div>
    </div>

    <!-- Conte√∫do principal (inicialmente oculto) -->
    <div id="main-content" style="display: none;">
        <!-- Header -->
        <header>
            <div class="container header-container">
                <div style="display: flex; align-items: center; gap: 10px;">
                    <a href="#" class="logo">
                        <i class="fas fa-gamepad"></i>
                        <span>BlackDz Store</span>
                    </a>
                    <div class="header-coupon" title="Cupom de 5% de desconto">
                        <!-- Texto atualizado conforme pedido -->
                        Cupom de 5% de desconto uso √∫nico: BLACKDZ5
                    </div>
                </div>
                
                <button class="mobile-menu-btn">
                    <i class="fas fa-bars"></i>
                </button>
                
                <nav>
                    <ul class="nav-links">
                        <li><a href="#" class="nav-category" data-category="all">In√≠cio</a></li>
                        <li><a href="#" class="nav-category" data-category="streamings">Streamings</a></li>
                        <li><a href="#" class="nav-category" data-category="xbox">Xbox/Game Pass</a></li>
                        <li><a href="#" class="nav-category" data-category="discord">Discord</a></li>
                        <li><a href="#" class="nav-category" data-category="steam">Steam</a></li>
                        <li><a href="#" class="nav-category" data-category="roblox">Contas Roblox</a></li>
                        <li><a href="#" class="nav-category" data-category="bloxfruits">Blox Fruits</a></li>
                        <li><a href="#" class="nav-category" data-category="scripts">Scripts DBC</a></li>
                        <li><a href="#" class="nav-category" data-category="fortnite">Fortnite</a></li>
                        <li><a href="#" class="nav-category" data-category="valorant">Valorant</a></li>
                        <li><a href="#" class="nav-category" data-category="minecraft">Minecraft</a></li>
                        <li><a href="#" class="nav-category" data-category="gta">GTA V</a></li>
                        <li><a href="#" class="nav-category" data-category="dbrage">Dragon Ball Rage</a></li>
                        <li><a href="#" class="nav-category" data-category="cupons">Cupons</a></li>
                        <li><a href="#" class="nav-category" data-category="pedir-jogo">Pedir Jogo</a></li>
                        <li><a href="#" class="nav-category" data-category="pedir-item">Pedir Item</a></li>
                        <li><a href="#" class="nav-category" data-category="admin" id="admin-link" style="color: #FFD700; display: none;">
                            <i class="fas fa-crown"></i> Admin
                        </a></li>
                    </ul>
                </nav>
                
                <div class="header-actions">
                    <div class="user-info">
                        <i class="fas fa-user"></i>
                        <span id="logged-user">Usu√°rio</span>
                    </div>
                    
                    <!-- Bot√µes de Redes Sociais -->
                    <a href="https://discord.gg/3qg2E7UPwV" target="_blank" class="social-btn discord-btn" title="Discord">
                        <i class="fab fa-discord"></i>
                    </a>
                    
                    <a href="http://instagram.com/o.dz.dev" target="_blank" class="social-btn instagram-btn" title="Instagram">
                        <i class="fab fa-instagram"></i>
                    </a>
                    
                    <a href="https://wa.me/5522981636278" target="_blank" class="social-btn whatsapp-btn" title="WhatsApp">
                        <i class="fab fa-whatsapp"></i>
                    </a>

                    <!-- Bot√£o de personaliza√ß√£o (engrenagem) -->
                    <button id="theme-btn" class="theme-btn" title="Personalizar apar√™ncia da loja">
                        <i class="fas fa-cog"></i>
                    </button>
                    
                    <div class="cart-icon">
                        <i class="fas fa-shopping-cart"></i>
                        <span class="cart-count">0</span>
                    </div>
                    
                    <button class="logout-btn" id="logout-btn">
                        <i class="fas fa-sign-out-alt"></i> Sair
                    </button>
                </div>
            </div>
        </header>

        <!-- Hero Section -->
        <section class="hero">
            <div class="container">
                <h1>BLACKDZ STORE</h1>
                <p>A melhor loja de produtos digitais para gamers! Compre keys, scripts, contas e muito mais com seguran√ßa e os melhores pre√ßos.</p>
                
                <div class="hero-actions">
                    <a href="#categories" class="btn">Explorar Produtos</a>
                </div>
            </div>
        </section>

        <!-- Categories Section -->
        <section class="categories-section container" id="categories">
            <h2 class="section-title">Nossas <span>Categorias</span></h2>
            <div class="categories-grid">
                <!-- Streamings -->
                <div class="category-card" data-category="streamings">
                    <div class="category-icon">
                        <i class="fas fa-film" style="color: #E50914;"></i>
                    </div>
                    <h3 class="category-title">Streamings</h3>
                    <p class="category-desc">Netflix, Crunchyroll, Canva e mais</p>
                </div>
                
                <!-- Xbox/Game Pass -->
                <div class="category-card" data-category="xbox">
                    <div class="category-icon">
                        <i class="fab fa-xbox" style="color: #107C10;"></i>
                    </div>
                    <h3 class="category-title">Xbox/Game Pass</h3>
                    <p class="category-desc">Game Pass Ultimate, contas e mais</p>
                </div>
                
                <!-- Discord -->
                <div class="category-card" data-category="discord">
                    <div class="category-icon">
                        <i class="fab fa-discord" style="color: #5865F2;"></i>
                    </div>
                    <h3 class="category-title">Discord</h3>
                    <p class="category-desc">Nitro, decora√ß√µes e gift cards</p>
                </div>
                
                <!-- Steam -->
                <div class="category-card" data-category="steam">
                    <div class="category-icon">
                        <i class="fab fa-steam" style="color: #171A21;"></i>
                    </div>
                    <h3 class="category-title">Steam</h3>
                    <p class="category-desc">Keys aleat√≥rias, jogos e gift cards</p>
                </div>
                
                <!-- Contas Roblox -->
                <div class="category-card" data-category="roblox">
                    <div class="category-icon">
                        <i class="fas fa-robot" style="color: #FF1D25;"></i>
                    </div>
                    <h3 class="category-title">Contas Roblox</h3>
                    <p class="category-desc">Contas antigas de Roblox</p>
                </div>
                
                <!-- Blox Fruits -->
                <div class="category-card" data-category="bloxfruits">
                    <div class="category-icon">
                        <i class="fas fa-dragon" style="color: #FF6B00;"></i>
                    </div>
                    <h3 class="category-title">Blox Fruits</h3>
                    <p class="category-desc">Gamepass, frutas permanentes, contas</p>
                </div>
                
                <!-- Scripts DBC -->
                <div class="category-card" data-category="scripts">
                    <div class="category-icon">
                        <i class="fas fa-code" style="color: #00ff88;"></i>
                    </div>
                    <h3 class="category-title">Scripts DBC</h3>
                    <p class="category-desc">Scripts para Dragon Block C</p>
                </div>
                
                <!-- Fortnite -->
                <div class="category-card" data-category="fortnite">
                    <div class="category-icon">
                        <i class="fas fa-skull-crossbones" style="color: #00C7FF;"></i>
                    </div>
                    <h3 class="category-title">Fortnite</h3>
                    <p class="category-desc">Contas, V-Bucks e itens</p>
                </div>
                
                <!-- Valorant -->
                <div class="category-card" data-category="valorant">
                    <div class="category-icon">
                        <i class="fas fa-crosshairs" style="color: #FF4655;"></i>
                    </div>
                    <h3 class="category-title">Valorant</h3>
                    <p class="category-desc">Contas, pontos e skins</p>
                </div>
                
                <!-- Minecraft -->
                <div class="category-card" data-category="minecraft">
                    <div class="category-icon">
                        <i class="fas fa-cube" style="color: #6CAE3A;"></i>
                    </div>
                    <h3 class="category-title">Minecraft</h3>
                    <p class="category-desc">Licen√ßa Java + Bedrock</p>
                </div>
                
                <!-- GTA V -->
                <div class="category-card" data-category="gta">
                    <div class="category-icon">
                        <i class="fas fa-car" style="color: #2ECC71;"></i>
                    </div>
                    <h3 class="category-title">GTA V</h3>
                    <p class="category-desc">Contas Rockstar e Steam</p>
                </div>
                
                <!-- Dragon Ball Rage -->
                <div class="category-card" data-category="dbrage">
                    <div class="category-icon">
                        <i class="fas fa-dragon" style="color: #FF0000;"></i>
                    </div>
                    <h3 class="category-title">Dragon Ball Rage</h3>
                    <p class="category-desc">Forms, boosts e customiza√ß√µes</p>
                </div>
                
                <!-- Cupons -->
                <div class="category-card special-category" data-category="cupons">
                    <div class="category-icon">
                        <i class="fas fa-tag" style="color: #FFD700;"></i>
                    </div>
                    <h3 class="category-title">Cupons</h3>
                    <p class="category-desc">Compre cupons de desconto</p>
                </div>
                
                <!-- Pedir Jogo -->
                <div class="category-card special-category" data-category="pedir-jogo">
                    <div class="category-icon">
                        <i class="fas fa-gamepad" style="color: #FF6B00;"></i>
                    </div>
                    <h3 class="category-title">Pedir Jogo</h3>
                    <p class="category-desc">Pe√ßa qualquer jogo da Steam</p>
                </div>
                
                <!-- Pedir Item para Loja -->
                <div class="category-card special-category" data-category="pedir-item">
                    <div class="category-icon">
                        <i class="fas fa-shopping-bag" style="color: #FFD700;"></i>
                    </div>
                    <h3 class="category-title">Pedir Item</h3>
                    <p class="category-desc">Solicite um item espec√≠fico</p>
                </div>
            </div>
        </section>

        <!-- Products Sections (mantido igual) -->
        <!-- Streamings -->
        <section class="products-section container" id="products-streamings">
            <div class="back-to-categories">
                <i class="fas fa-arrow-left"></i>
                Voltar para categorias
            </div>
            <h2 class="section-title">Produtos <span>Streamings</span></h2>
            <div class="products-grid" id="streamings-products"></div>
        </section>

        <!-- Xbox/Game Pass -->
        <section class="products-section container" id="products-xbox">
            <div class="back-to-categories">
                <i class="fas fa-arrow-left"></i>
                Voltar para categorias
            </div>
            <h2 class="section-title">Produtos <span>Xbox/Game Pass</span></h2>
            <div class="products-grid" id="xbox-products"></div>
        </section>

        <!-- Discord -->
        <section class="products-section container" id="products-discord">
            <div class="back-to-categories">
                <i class="fas fa-arrow-left"></i>
                Voltar para categorias
            </div>
            <h2 class="section-title">Produtos <span>Discord</span></h2>
            <div class="products-grid" id="discord-products"></div>
        </section>

        <!-- Steam -->
        <section class="products-section container" id="products-steam">
            <div class="back-to-categories">
                <i class="fas fa-arrow-left"></i>
                Voltar para categorias
            </div>
            <h2 class="section-title">Produtos <span>Steam</span></h2>
            <div class="products-grid" id="steam-products"></div>
        </section>

        <!-- Contas Roblox -->
        <section class="products-section container" id="products-roblox">
            <div class="back-to-categories">
                <i class="fas fa-arrow-left"></i>
                Voltar para categorias
            </div>
            <h2 class="section-title">Contas <span>Roblox</span></h2>
            <div class="products-grid" id="roblox-products"></div>
        </section>

        <!-- Blox Fruits -->
        <section class="products-section container" id="products-bloxfruits">
            <div class="back-to-categories">
                <i class="fas fa-arrow-left"></i>
                Voltar para categorias
            </div>
            <h2 class="section-title">Blox <span>Fruits</span></h2>
            
            <div class="subcategories-grid">
                <!-- Gamepass -->
                <div class="subcategory-card" data-subcategory="gamepass">
                    <div class="subcategory-icon">
                        <i class="fas fa-gamepad"></i>
                    </div>
                    <h3 class="subcategory-title">Gamepass</h3>
                    <p style="color: #aaa; font-size: 0.9rem;">Gamepasses do Blox Fruits</p>
                </div>
                
                <!-- Frutas Permanentes -->
                <div class="subcategory-card" data-subcategory="frutas-permanentes">
                    <div class="subcategory-icon">
                        <i class="fas fa-apple-alt"></i>
                    </div>
                    <h3 class="subcategory-title">Frutas Permanentes</h3>
                    <p style="color: #aaa; font-size: 0.9rem;">Frutas permanentes do Blox Fruits</p>
                </div>
                
                <!-- Contas -->
                <div class="subcategory-card" data-subcategory="contas">
                    <div class="subcategory-icon">
                        <i class="fas fa-user"></i>
                    </div>
                    <h3 class="subcategory-title">Contas</h3>
                    <p style="color: #aaa; font-size: 0.9rem;">Contas de Blox Fruits</p>
                </div>
            </div>
            
            <!-- Gamepass -->
            <div class="products-grid" id="bloxfruits-gamepass" style="display: none;"></div>
            
            <!-- Frutas Permanentes -->
            <div class="products-grid" id="bloxfruits-frutas-permanentes" style="display: none;"></div>
            
            <!-- Contas -->
            <div class="products-grid" id="bloxfruits-contas" style="display: none;"></div>
            
            <!-- Pagina√ß√£o -->
            <div class="pagination" id="bloxfruits-pagination" style="display: none;"></div>
        </section>

        <!-- Scripts DBC -->
        <section class="products-section container" id="products-scripts">
            <div class="back-to-categories">
                <i class="fas fa-arrow-left"></i>
                Voltar para categorias
            </div>
            <h2 class="section-title">Scripts <span>Dragon Block C</span></h2>
            <div class="products-grid" id="scripts-products"></div>
        </section>

        <!-- Fortnite -->
        <section class="products-section container" id="products-fortnite">
            <div class="back-to-categories">
                <i class="fas fa-arrow-left"></i>
                Voltar para categorias
            </div>
            <h2 class="section-title">Produtos <span>Fortnite</span></h2>
            <div class="products-grid" id="fortnite-products"></div>
        </section>

        <!-- Valorant -->
        <section class="products-section container" id="products-valorant">
            <div class="back-to-categories">
                <i class="fas fa-arrow-left"></i>
                Voltar para categorias
            </div>
            <h2 class="section-title">Produtos <span>Valorant</span></h2>
            <div class="products-grid" id="valorant-products"></div>
        </section>

        <!-- Minecraft -->
        <section class="products-section container" id="products-minecraft">
            <div class="back-to-categories">
                <i class="fas fa-arrow-left"></i>
                Voltar para categorias
            </div>
            <h2 class="section-title">Produtos <span>Minecraft</span></h2>
            <div class="products-grid" id="minecraft-products"></div>
        </section>

        <!-- GTA V -->
        <section class="products-section container" id="products-gta">
            <div class="back-to-categories">
                <i class="fas fa-arrow-left"></i>
                Voltar para categorias
            </div>
            <h2 class="section-title">Produtos <span>GTA V</span></h2>
            <div class="products-grid" id="gta-products"></div>
        </section>

        <!-- Dragon Ball Rage -->
        <section class="products-section container" id="products-dbrage">
            <div class="back-to-categories">
                <i class="fas fa-arrow-left"></i>
                Voltar para categorias
            </div>
            <h2 class="section-title">Dragon Ball <span>Rage</span></h2>
            <div class="products-grid" id="dbrage-products"></div>
        </section>

        <!-- Cupons -->
        <section class="products-section container" id="products-cupons">
            <div class="back-to-categories">
                <i class="fas fa-arrow-left"></i>
                Voltar para categorias
            </div>
            <h2 class="section-title">Cupons de <span>Desconto</span></h2>
            
            <div class="coupon-section">
                <h3 style="color: var(--secondary); margin-bottom: 15px;">
                    <i class="fas fa-tag"></i> Cupons Dispon√≠veis
                </h3>
                <div style="margin-bottom: 15px;">
                    <p><i class="fas fa-gift" style="color: #FFD700; margin-right: 8px;"></i> 
                        <strong>Cupom Gratuito:</strong> <span class="coupon-badge">BLACKDZ5</span> - 5% de desconto (uso √∫nico por pessoa)
                    </p>
                    <p style="font-size: 0.9rem; color: #aaa; margin-top: 5px;">
                        Use o cupom <strong>BLACKDZ5</strong> na finaliza√ß√£o da compra para receber 5% de desconto!
                    </p>
                </div>
                
                <div style="margin-top: 20px; background: rgba(255, 215, 0, 0.1); padding: 15px; border-radius: var(--border-radius);">
                    <h4 style="color: #FFD700; margin-bottom: 10px;">
                        <i class="fas fa-crown"></i> Cupons Premium
                    </h4>
                    <p style="color: #ccc; margin-bottom: 15px;">
                        Compre cupons de desconto permanente para usar em todas as suas compras!
                    </p>
                </div>
            </div>
            
            <div class="cupom-products-grid" id="cupons-products"></div>
        </section>

        <!-- Pedir Jogo -->
        <section class="products-section container" id="products-pedir-jogo">
            <div class="back-to-categories">
                <i class="fas fa-arrow-left"></i>
                Voltar para categorias
            </div>
            <h2 class="section-title">Pedir <span>Jogo</span></h2>
            
            <div class="game-selection-container">
                <p style="color: #ccc; margin-bottom: 20px; text-align: center;">
                    Escolha um jogo da lista ou solicite outro que n√£o esteja listado.
                </p>
                
                <div class="game-search">
                    <input type="text" id="game-search-input" placeholder="Digite o nome do jogo que deseja...">
                </div>
                
                <h3 style="color: var(--secondary); margin: 30px 0 20px; text-align: center;">Jogos Populares</h3>
                <div class="suggested-games" id="suggested-games-list"></div>
                
                <div style="margin-top: 30px; text-align: center;">
                    <p style="color: #aaa; margin-bottom: 15px;">N√£o encontrou o jogo que procura?</p>
                    <button class="btn btn-secondary" id="request-game-btn">
                        <i class="fas fa-comment"></i> Pedir Outro Jogo
                    </button>
                </div>
            </div>
        </section>

        <!-- Pedir Item para Loja -->
        <section class="products-section container" id="products-pedir-item">
            <div class="back-to-categories">
                <i class="fas fa-arrow-left"></i>
                Voltar para categorias
            </div>
            <h2 class="section-title">Pedir <span>Item para Loja</span></h2>
            
            <div class="game-selection-container">
                <div style="text-align: center; margin-bottom: 30px;">
                    <i class="fas fa-shopping-bag" style="font-size: 4rem; color: #FFD700; margin-bottom: 20px;"></i>
                    <h3 style="color: var(--secondary); margin-bottom: 15px;">N√£o encontrou o produto que procura?</h3>
                    <p style="color: #ccc; max-width: 600px; margin: 0 auto;">
                        Se voc√™ est√° procurando um item espec√≠fico que n√£o encontrou em nossa loja, 
                        podemos tentar conseguir para voc√™! Entre em contato pelo WhatsApp e fa√ßa sua solicita√ß√£o.
                    </p>
                </div>
                
                <div style="text-align: center; margin-top: 40px;">
                    <button class="btn" id="request-item-btn" style="padding: 15px 40px; font-size: 1.1rem;">
                        <i class="fab fa-whatsapp"></i> Pedir Item pelo WhatsApp
                    </button>
                    <p style="color: #aaa; margin-top: 15px;">
                        Respondemos em at√© 24 horas com or√ßamento e disponibilidade.
                    </p>
                </div>
                
                <div style="margin-top: 40px; background: rgba(40, 40, 40, 0.7); padding: 25px; border-radius: var(--border-radius);">
                    <h4 style="color: var(--secondary); margin-bottom: 15px;">Como funciona?</h4>
                    <ol style="color: #ccc; padding-left: 20px; line-height: 1.8;">
                        <li>Entre em contato pelo bot√£o acima</li>
                        <li>Informe o item que deseja (jogo, conta, produto digital, etc.)</li>
                        <li>Receba o or√ßamento e prazo de entrega</li>
                        <li>Fa√ßa o pagamento e receba seu produto!</li>
                    </ol>
                </div>
            </div>
        </section>

        <!-- Painel de Administrador ATUALIZADO -->
        <section class="products-section container" id="products-admin">
            <div class="back-to-categories">
                <i class="fas fa-arrow-left"></i>
                Voltar para categorias
            </div>
            <h2 class="section-title">Painel de <span>Administrador</span></h2>
            
            <div class="admin-panel">
                <div class="admin-tabs">
                    <button class="admin-tab active" data-tab="orders">Pedidos</button>
                    <button class="admin-tab" data-tab="chat">Chat com Clientes</button>
                    <button class="admin-tab" data-tab="users">Usu√°rios</button>
                    <button class="admin-tab" data-tab="coupons">Cupons</button>
                    <button class="admin-tab" data-tab="create-coupon">Criar Cupom</button>
                </div>
                
                <!-- Pedidos -->
                <div class="admin-content active" id="orders-content">
                    <h3 style="color: var(--secondary); margin-bottom: 20px;">
                        <i class="fas fa-shopping-cart"></i> Pedidos Recentes
                    </h3>
                    <div id="orders-list">
                        <table class="orders-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Cliente</th>
                                    <th>Produtos</th>
                                    <th>Total</th>
                                    <th>Status</th>
                                    <th>Data</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="orders-table-body"></tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Chat -->
                <div class="admin-content" id="chat-content">
                    <h3 style="color: var(--secondary); margin-bottom: 20px;">
                        <i class="fas fa-comments"></i> Chat com Clientes
                    </h3>
                    <div class="chat-messages" id="chat-messages"></div>
                    <div class="chat-input">
                        <input type="text" id="chat-input" placeholder="Digite sua mensagem...">
                        <button class="btn" id="send-message-btn">
                            <i class="fas fa-paper-plane"></i> Enviar
                        </button>
                    </div>
                </div>
                
                <!-- Usu√°rios -->
                <div class="admin-content" id="users-content">
                    <h3 style="color: var(--secondary); margin-bottom: 20px;">
                        <i class="fas fa-users"></i> Gerenciar Usu√°rios
                    </h3>
                    <div id="users-list">
                        <table class="users-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Usu√°rio</th>
                                    <th>Email</th>
                                    <th>Tipo</th>
                                    <th>Data de Cria√ß√£o</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="users-table-body"></tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Cupons -->
                <div class="admin-content" id="coupons-content">
                    <h3 style="color: var(--secondary); margin-bottom: 20px;">
                        <i class="fas fa-tag"></i> Gerenciar Cupons
                    </h3>
                    <div id="coupons-list">
                        <table class="orders-table">
                            <thead>
                                <tr>
                                    <th>C√≥digo</th>
                                    <th>Desconto</th>
                                    <th>Tipo</th>
                                    <th>Usos</th>
                                    <th>Autorizado para</th>
                                    <th>Status</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="coupons-table-body"></tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Criar Cupom -->
                <div class="admin-content" id="create-coupon-content">
                    <h3 style="color: var(--secondary); margin-bottom: 20px;">
                        <i class="fas fa-plus-circle"></i> Criar Novo Cupom
                    </h3>
                    <div class="coupon-form-admin">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="coupon-code-admin">C√≥digo do Cupom</label>
                                <input type="text" id="coupon-code-admin" placeholder="Ex: BLACKDZ10" class="coupon-input">
                            </div>
                            <div class="form-group">
                                <label for="coupon-discount">Valor do Desconto</label>
                                <input type="number" id="coupon-discount" placeholder="Ex: 10" class="coupon-input" min="1" step="0.01">
                            </div>
                            <div class="form-group">
                                <label for="coupon-type">Tipo de Desconto</label>
                                <select id="coupon-type" class="coupon-input">
                                    <option value="percentage">Porcentagem (%)</option>
                                    <option value="fixed">Valor Fixo (R$)</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="coupon-single-use">
                                    <input type="checkbox" id="coupon-single-use"> Cupom de uso √∫nico
                                </label>
                            </div>
                            <div class="form-group">
                                <label for="coupon-restricted">
                                    <input type="checkbox" id="coupon-restricted"> Cupom restrito a usu√°rios espec√≠ficos
                                </label>
                            </div>
                        </div>
                        
                        <div id="authorized-users-section" style="display: none; margin-top: 20px;">
                            <h4 style="color: var(--secondary); margin-bottom: 10px;">Usu√°rios Autorizados</h4>
                            <div id="authorized-users-list" class="authorized-users"></div>
                            <div style="margin-top: 10px;">
                                <select id="add-user-select" style="width: 200px; padding: 8px; background: rgba(255,255,255,0.1); color: white; border: 1px solid var(--primary); border-radius: var(--border-radius);">
                                    <option value="">Selecione um usu√°rio...</option>
                                </select>
                                <button id="add-user-btn" class="btn btn-secondary" style="padding: 8px 15px; margin-left: 10px;">
                                    <i class="fas fa-plus"></i> Adicionar
                                </button>
                            </div>
                        </div>
                        
                        <button id="create-coupon-btn" class="btn" style="margin-top: 20px; width: 100%;">
                            <i class="fas fa-plus"></i> Criar Cupom
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Carrinho de Compras -->
        <div class="cart-modal">
            <div class="cart-header">
                <h3>Meu Carrinho</h3>
                <button class="close-cart">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="cart-items" id="cart-items">
                <div class="empty-cart-message">
                    <i class="fas fa-shopping-cart"></i>
                    <p>Seu carrinho est√° vazio</p>
                </div>
            </div>
            <div class="cart-footer">
                <div class="cart-total">
                    <span>Subtotal:</span>
                    <span id="cart-subtotal">R$ 0,00</span>
                </div>
                
                <div class="cart-coupon">
                    <h4>Aplicar Cupom de Desconto</h4>
                    <div class="cart-coupon-input">
                        <input type="text" id="coupon-code" placeholder="Digite o c√≥digo do cupom">
                        <button class="btn btn-secondary" id="apply-coupon-btn">Aplicar</button>
                    </div>
                    <div class="coupon-message" id="coupon-message"></div>
                </div>
                
                <div class="cart-discount" id="cart-discount" style="display: none;">
                    <span>Desconto:</span>
                    <span id="discount-amount">-R$ 0,00</span>
                </div>
                
                <div class="cart-final-total">
                    <span>Total:</span>
                    <span id="cart-total">R$ 0,00</span>
                </div>
                
                <div class="cart-actions">
                    <button class="btn btn-success" id="checkout-btn">Finalizar Compra</button>
                    <button class="btn btn-danger" id="clear-cart">Limpar Carrinho</button>
                </div>
            </div>
        </div>

        <!-- Modal de Pagamento ATUALIZADO -->
        <div class="checkout-modal">
            <div class="checkout-content">
                <button class="close-checkout">
                    <i class="fas fa-times"></i>
                </button>
                <h2>Finalizar Compra</h2>
                
                <div class="order-summary">
                    <h4>Resumo do Pedido</h4>
                    <div class="order-items" id="order-items"></div>
                    <div class="order-discount" id="order-discount" style="display: none;">
                        <span>Desconto:</span>
                        <span id="discount-summary">-R$ 0,00</span>
                    </div>
                    <div class="order-total">
                        <span>Total:</span>
                        <span id="order-total">R$ 0,00</span>
                    </div>
                </div>
                
                <div class="payment-instructions">
                    <h3>Instru√ß√µes de Pagamento</h3>
                    <p>Para finalizar sua compra, fa√ßa o pagamento via PIX para a chave abaixo:</p>
                    <div class="pix-key" id="pix-key">22981636278</div>
                    <p><strong>Valor Total: <span id="checkout-total">R$ 0,00</span></strong></p>
                    <p>Ap√≥s o pagamento, <strong>envie o comprovante</strong> por um dos canais abaixo para que possamos entregar seu produto.</p>
                    <p style="color: var(--secondary); margin-top: 10px;">Inclua no comprovante: Nome do produto e n√∫mero do pedido.</p>

                    <p style="margin-top: 10px; color: #ccc;">
                        Observa√ß√£o: esta √°rea √© rol√°vel caso o conte√∫do n√£o caiba na tela ‚Äî use a barra para descer e subir.
                    </p>
                </div>

                <h3>Enviar Comprovante</h3>
                <div class="receipt-options">
                    <div class="receipt-option whatsapp" id="whatsapp-option">
                        <div class="receipt-option-icon">
                            <i class="fab fa-whatsapp" style="color: #25D366;"></i>
                        </div>
                        <div class="receipt-option-info">
                            <h4>WhatsApp</h4>
                            <p>Enviar comprovante pelo WhatsApp (22) 98163-6278</p>
                        </div>
                        <i class="fas fa-chevron-right"></i>
                    </div>
                    
                    <div class="receipt-option instagram" id="instagram-option">
                        <div class="receipt-option-icon">
                            <i class="fab fa-instagram" style="color: #E1306C;"></i>
                        </div>
                        <div class="receipt-option-info">
                            <h4>Instagram</h4>
                            <p>Enviar mensagem no Instagram @o.dz.dev</p>
                        </div>
                        <i class="fas fa-chevron-right"></i>
                    </div>
                    
                    <div class="receipt-option discord" id="discord-option">
                        <div class="receipt-option-icon">
                            <i class="fab fa-discord" style="color: #5865F2;"></i>
                        </div>
                        <div class="receipt-option-info">
                            <h4>Discord</h4>
                            <p>Abrir ticket no servidor Discord</p>
                        </div>
                        <i class="fas fa-chevron-right"></i>
                    </div>
                </div>
                
                <!-- Mensagem para copiar -->
                <div class="copy-message-container" id="copy-message-container">
                    <h4 style="color: var(--secondary); margin-bottom: 10px;">Mensagem para enviar:</h4>
                    <div class="copy-message-box" id="copy-message-box"></div>
                    <div class="copy-buttons">
                        <button class="copy-btn copy" id="copy-message-btn">
                            <i class="fas fa-copy"></i> Copiar Mensagem
                        </button>
                        <button class="copy-btn open" id="open-app-btn">
                            <i class="fas fa-external-link-alt"></i> Abrir App
                        </button>
                    </div>
                </div>

                <div style="margin-top: 18px;">
                    <!-- Bot√£o novo para confirmar/registrar pedido no sistema (simula√ß√£o) -->
                    <button id="confirm-payment-btn" class="btn btn-success" style="width:100%; padding: 12px 18px; margin-bottom: 12px;">
                        <i class="fas fa-check"></i> Confirmar Pagamento (Registrar Pedido)
                    </button>
                </div>
                
                <p style="margin-top: 20px; font-size: 0.9rem; color: #aaa; text-align: center;">
                    Ap√≥s enviar o comprovante, seu produto ser√° entregue em at√© 24 horas.
                </p>
            </div>
        </div>

        <!-- Chatbot ATUALIZADO -->
        <div class="chatbot-container">
            <div class="chatbot-toggle" id="chatbot-toggle">
                <i class="fas fa-comment-dots"></i>
            </div>
            <div class="chatbot-window" id="chatbot-window">
                <div class="chatbot-header">
                    <h3><i class="fas fa-robot"></i> BlackDz Assistant</h3>
                    <button class="close-chatbot" id="close-chatbot">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="chatbot-messages" id="chatbot-messages"></div>
                <div class="chatbot-input">
                    <input type="text" id="chatbot-input" placeholder="Digite sua mensagem...">
                    <button id="send-chatbot-message">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Overlay para modais -->
        <div class="overlay"></div>

        <!-- THEME / PERSONALIZA√á√ÉO MODAL -->
        <div class="theme-modal" id="theme-modal" aria-hidden="true">
            <h4>Personalizar apar√™ncia</h4>
            <div class="theme-row">
                <label>Fundo (URL)</label>
                <input type="text" id="bg-url-input" placeholder="Cole a URL do fundo...">
            </div>
            <div class="theme-row">
                <label>Ou carregar imagem</label>
                <input type="file" id="bg-file-input" accept="image/*">
            </div>
            <div class="theme-row">
                <label>Cor prim√°ria</label>
                <input type="color" id="primary-color-input" value="#8a2be2">
            </div>
            <div class="theme-row">
                <label>Cor secund√°ria</label>
                <input type="color" id="secondary-color-input" value="#00ff88">
            </div>
            <div class="theme-row">
                <label>Gradient start</label>
                <input type="color" id="gradient-start-input" value="#8a2be2">
            </div>
            <div class="theme-row">
                <label>Gradient end</label>
                <input type="color" id="gradient-end-input" value="#00ff88">
            </div>

            <div style="margin-top:8px;">
                <div class="theme-presets">
                    <div class="preset" title="Roxo / Verde (padr√£o)" style="background: linear-gradient(135deg,#8a2be2,#00ff88)" data-preset='{"primary":"#8a2be2","secondary":"#00ff88","g1":"#8a2be2","g2":"#00ff88","bg":""}'></div>
                    <div class="preset" title="Neon azul" style="background: linear-gradient(135deg,#00c7ff,#6a1cb0)" data-preset='{"primary":"#00c7ff","secondary":"#6a1cb0","g1":"#00c7ff","g2":"#6a1cb0","bg":""}'></div>
                    <div class="preset" title="Dark red" style="background: linear-gradient(135deg,#ff385c,#8a2be2)" data-preset='{"primary":"#ff385c","secondary":"#8a2be2","g1":"#ff385c","g2":"#8a2be2","bg":""}'></div>
                    <div class="preset" title="Green tech" style="background: linear-gradient(135deg,#00ff88,#2ecc71)" data-preset='{"primary":"#00ff88","secondary":"#2ecc71","g1":"#00ff88","g2":"#2ecc71","bg":""}'></div>
                    <div class="preset" title="Clean gray" style="background: linear-gradient(135deg,#6c757d,#343a40)" data-preset='{"primary":"#6c757d","secondary":"#343a40","g1":"#6c757d","g2":"#343a40","bg":""}'></div>
                </div>
            </div>

            <div class="theme-actions">
                <button class="btn" id="apply-theme-btn">Aplicar</button>
                <button class="btn btn-secondary" id="preview-theme-btn">Visualizar</button>
                <button class="btn btn-danger" id="reset-theme-btn">Resetar</button>
                <button class="btn btn-secondary" id="close-theme-btn" style="margin-left:auto;">Fechar</button>
            </div>

            <div class="theme-note">
                As altera√ß√µes s√£o salvas no navegador. Para remover plano de fundo, deixe o campo URL vazio e aplique.
            </div>
        </div>
    </div>
<script>
  window.currentUser = null;
</script>

    <script>
        // Sistema de Administra√ß√£o ATUALIZADO
        class AdminSystem {
            constructor() {
                this.orders = JSON.parse(localStorage.getItem('blackdz_orders')) || [];
                this.messages = JSON.parse(localStorage.getItem('blackdz_messages')) || [];
                this.coupons = JSON.parse(localStorage.getItem('blackdz_coupons')) || this.getDefaultCoupons();
                this.chatbotHistory = JSON.parse(localStorage.getItem('blackdz_chatbot_history')) || [];
                this.saveAll();
            }
            
            getDefaultCoupons() {
                return [
                    {
                        id: 'BLACKDZ5',
                        code: 'BLACKDZ5',
                        discount: 5,
                        type: 'percentage',
                        isActive: true,
                        isSingleUse: true,
                        usedBy: [],
                        authorizedUsers: [], // Todos podem usar
                        createdBy: 'system'
                    }
                ];
            }
            
            saveAll() {
                localStorage.setItem('blackdz_orders', JSON.stringify(this.orders));
                localStorage.setItem('blackdz_messages', JSON.stringify(this.messages));
                localStorage.setItem('blackdz_coupons', JSON.stringify(this.coupons));
                localStorage.setItem('blackdz_chatbot_history', JSON.stringify(this.chatbotHistory));
            }
            
            // Pedidos
            createOrder(orderData) {
                const order = {
                    id: Date.now(),
                    ...orderData,
                    status: 'pending',
                    createdAt: new Date().toISOString()
                };
                this.orders.unshift(order);
                this.saveAll();
                return order;
            }
            
            getOrders() {
                return this.orders;
            }
            
            updateOrderStatus(orderId, status) {
                const order = this.orders.find(o => o.id === orderId);
                if (order) {
                    order.status = status;
                    this.saveAll();
                    return true;
                }
                return false;
            }
            
            // Mensagens
            sendMessage(sender, message, isAdmin = false) {
                const msg = {
                    id: Date.now(),
                    sender,
                    message,
                    isAdmin,
                    timestamp: new Date().toISOString()
                };
                this.messages.push(msg);
                this.saveAll();
                return msg;
            }
            
            getMessages() {
                return this.messages;
            }
            
            // Chatbot History
            addChatbotMessage(userMessage, botResponse) {
                const chat = {
                    id: Date.now(),
                    userMessage,
                    botResponse,
                    timestamp: new Date().toISOString(),
                    userId: currentUser ? currentUser.id : null
                };
                this.chatbotHistory.push(chat);
                this.saveAll();
                return chat;
            }
            
            getChatbotHistory() {
                return this.chatbotHistory;
            }
            
            // Cupons - SISTEMA ATUALIZADO
            createCoupon(code, discount, type = 'percentage', isSingleUse = false, isRestricted = false, authorizedUsers = []) {
                const coupon = {
                    id: code,
                    code: code.toUpperCase(),
                    discount,
                    type,
                    isActive: true,
                    isSingleUse,
                    isRestricted,
                    authorizedUsers,
                    usedBy: [],
                    createdBy: currentUser ? currentUser.username : 'admin',
                    createdAt: new Date().toISOString()
                };
                this.coupons.push(coupon);
                this.saveAll();
                return coupon;
            }
            
            getCoupons() {
                return this.coupons;
            }
            
            validateCoupon(code, userId) {
                const coupon = this.coupons.find(c => c.code === code.toUpperCase() && c.isActive);
                if (!coupon) return { valid: false, message: 'Cupom inv√°lido' };
                
                // Verificar se √© restrito
                if (coupon.isRestricted && coupon.authorizedUsers.length > 0) {
                    if (!coupon.authorizedUsers.includes(userId)) {
                        return { valid: false, message: 'Cupom n√£o autorizado para seu usu√°rio' };
                    }
                }
                
                if (coupon.isSingleUse && coupon.usedBy.includes(userId)) {
                    return { valid: false, message: 'Cupom j√° utilizado' };
                }
                
                return { 
                    valid: true, 
                    discount: coupon.discount, 
                    type: coupon.type,
                    couponId: coupon.id 
                };
            }
            
            useCoupon(code, userId) {
                const coupon = this.coupons.find(c => c.code === code.toUpperCase());
                if (coupon && coupon.isSingleUse) {
                    if (!coupon.usedBy.includes(userId)) {
                        coupon.usedBy.push(userId);
                        this.saveAll();
                    }
                }
            }
            
            toggleCoupon(code) {
                const coupon = this.coupons.find(c => c.code === code.toUpperCase());
                if (coupon) {
                    coupon.isActive = !coupon.isActive;
                    this.saveAll();
                    return coupon.isActive;
                }
                return false;
            }
            
            addAuthorizedUser(couponCode, userId) {
                const coupon = this.coupons.find(c => c.code === couponCode.toUpperCase());
                if (coupon) {
                    if (!coupon.authorizedUsers.includes(userId)) {
                        coupon.authorizedUsers.push(userId);
                        this.saveAll();
                        return true;
                    }
                }
                return false;
            }
            
            removeAuthorizedUser(couponCode, userId) {
                const coupon = this.coupons.find(c => c.code === couponCode.toUpperCase());
                if (coupon) {
                    coupon.authorizedUsers = coupon.authorizedUsers.filter(id => id !== userId);
                    this.saveAll();
                    return true;
                }
                return false;
            }
        }

        // Sistema do Chatbot ATUALIZADO - AGORA √â UMA IA REAL (respostas ampliadas e sem '**')
        class ChatbotSystem {
            constructor() {
                this.conversationHistory = [];
                this.userContext = {};
                this.productsData = productsData;
                this.isTyping = false;
            }
            
            // Gerar resposta baseada na mensagem do usu√°rio - AGORA √â UMA IA
            generateResponse(userMessage) {
                const message = userMessage.toLowerCase().trim();
                
                // Salvar contexto
                this.conversationHistory.push({ role: 'user', content: message });
                
                // An√°lise de contexto
                const context = this.analyzeContext(message);
                
                // Gerar resposta baseada no contexto
                let response = this.generateContextualResponse(message, context);
                
                // Adicionar emo√ß√£o e personalidade
                response = this.addPersonality(response, context);
                
                // Salvar resposta no hist√≥rico
                this.conversationHistory.push({ role: 'assistant', content: response });
                
                // Limitar hist√≥rico
                if (this.conversationHistory.length > 50) {
                    this.conversationHistory = this.conversationHistory.slice(-50);
                }
                
                return response;
            }
            
            // An√°lise de contexto avan√ßada
            analyzeContext(message) {
                const context = {
                    intent: 'general',
                    productMentioned: null,
                    needsHelp: false,
                    wantsToBuy: false,
                    hasProblem: false,
                    isGreeting: false,
                    isFarewell: false,
                    isThankful: false
                };
                
                // An√°lise de inten√ß√£o
                if (this.containsAny(message, ['ol√°', 'oi', 'ola', 'bom dia', 'boa tarde', 'boa noite', 'hello', 'hi'])) {
                    context.intent = 'greeting';
                    context.isGreeting = true;
                }
                else if (this.containsAny(message, ['tchau', 'adeus', 'at√© logo', 'flw', 'vlw', 'obrigado', 'valeu', 'thx'])) {
                    context.intent = 'farewell';
                    context.isFarewell = true;
                    context.isThankful = message.includes('obrigado') || message.includes('valeu');
                }
                else if (this.containsAny(message, ['comprar', 'compras', 'carrinho', 'finalizar', 'pagamento', 'pix'])) {
                    context.intent = 'purchase';
                    context.wantsToBuy = true;
                }
                else if (this.containsAny(message, ['problema', 'erro', 'n√£o funciona', 'bug', 'ajuda', 'socorro', 'urgente'])) {
                    context.intent = 'help';
                    context.needsHelp = true;
                    context.hasProblem = true;
                }
                else if (this.containsAny(message, ['pre√ßo', 'quanto custa', 'valor', 'quanto √©', 'quanto ta'])) {
                    context.intent = 'price';
                }
                else if (this.containsAny(message, ['estoque', 'dispon√≠vel', 'tem ', 'quantos', 'restante'])) {
                    context.intent = 'stock';
                }
                else if (this.containsAny(message, ['cupom', 'desconto', 'promo√ß√£o', 'blackdz'])) {
                    context.intent = 'coupon';
                }
                else if (this.containsAny(message, ['comprovante', 'paguei', 'enviei', 'pagamento feito'])) {
                    context.intent = 'receipt';
                }
                else if (this.containsAny(message, ['entrega', 'tempo', 'demora', 'receber', 'prazo'])) {
                    context.intent = 'delivery';
                }
                
                // Detectar produtos mencionados
                context.productMentioned = this.detectProduct(message);
                
                return context;
            }
            
            // Detectar produto mencionado
            detectProduct(message) {
                const productKeywords = {
                    'crunchyroll': 'Streamings',
                    'netflix': 'Streamings',
                    'xbox': 'Xbox/Game Pass',
                    'game pass': 'Xbox/Game Pass',
                    'discord': 'Discord',
                    'nitro': 'Discord',
                    'steam': 'Steam',
                    'roblox': 'Contas Roblox',
                    'blox fruits': 'Blox Fruits',
                    'blox': 'Blox Fruits',
                    'frutas': 'Blox Fruits',
                    'scripts': 'Scripts DBC',
                    'dbc': 'Scripts DBC',
                    'fortnite': 'Fortnite',
                    'vbucks': 'Fortnite',
                    'valorant': 'Valorant',
                    'minecraft': 'Minecraft',
                    'gta': 'GTA V',
                    'dragon ball rage': 'Dragon Ball Rage',
                    'db rage': 'Dragon Ball Rage'
                };
                
                for (const [keyword, category] of Object.entries(productKeywords)) {
                    if (message.includes(keyword)) {
                        return { keyword, category };
                    }
                }
                
                return null;
            }
            
            // Gerar resposta contextual
            generateContextualResponse(message, context) {
                switch(context.intent) {
                    case 'greeting':
                        return this.getGreetingResponse();
                    case 'farewell':
                        return this.getFarewellResponse(context.isThankful);
                    case 'purchase':
                        return this.getPurchaseResponse();
                    case 'help':
                        return this.getHelpResponse();
                    case 'price':
                        return this.getPriceResponse(context.productMentioned);
                    case 'stock':
                        return this.getStockResponse(context.productMentioned);
                    case 'coupon':
                        return this.getCouponResponse();
                    case 'receipt':
                        return this.getReceiptResponse();
                    case 'delivery':
                        return this.getDeliveryResponse();
                    default:
                        return this.getGeneralResponse(message, context);
                }
            }
            
            // Respostas espec√≠ficas (SEM markdown ** e com passos em linhas separadas)
            getGreetingResponse() {
                const greetings = [
                    "Ol√°! üëã Eu sou o BlackDz Assistant, seu assistente virtual da BlackDz Store! Como posso te ajudar hoje?",
                    "E a√≠, tudo bem? üòä Sou o assistente da BlackDz Store! Em que posso ajudar?",
                    "Oi! üëã Bem-vindo √† BlackDz Store! Eu sou seu assistente pessoal. Como posso tornar sua experi√™ncia melhor hoje?",
                    "Fala! Estou aqui para ajudar com compras, d√∫vidas e suporte. O que voc√™ precisa?"
                ];
                return this.getRandomResponse(greetings);
            }
            
            getFarewellResponse(isThankful) {
                if (isThankful) {
                    const responses = [
                        "De nada! üòä Fico feliz em ajudar! Volte sempre √† BlackDz Store! üéÆ",
                        "Por nada! Qualquer d√∫vida, estou aqui! N√£o esque√ßa de conferir nossas promo√ß√µes!",
                        "Foi um prazer ajudar! Espero v√™-lo novamente na BlackDz Store! üëã",
                        "Imagina! Sempre que precisar, volto a ajudar. Boas compras!"
                    ];
                    return this.getRandomResponse(responses);
                } else {
                    const responses = [
                        "At√© mais! üëã Qualquer d√∫vida, estou aqui para ajudar!",
                        "Tchau! Espero ter ajudado! Volte sempre! üòä",
                        "At√© a pr√≥xima! N√£o se esque√ßa do cupom BLACKDZ5 para sua primeira compra!",
                        "Falou! Se precisar, √© s√≥ chamar."
                    ];
                    return this.getRandomResponse(responses);
                }
            }
            
            getPurchaseResponse() {
                // Cada passo em uma linha numerada, sem markdown
                return "üõí PARA COMPRAR NA BLACKDZ STORE:\n\n1. Navegue pelas categorias e escolha os produtos desejados.\n2. Clique em 'Adicionar ao Carrinho' nos produtos que quiser.\n3. Abra o carrinho (√≠cone no canto superior direito) para revisar os itens.\n4. Se tiver cupom, digite o c√≥digo no campo de cupom e clique em 'Aplicar'.\n5. Clique em 'Finalizar Compra'.\n6. Realize o pagamento via PIX usando a chave informada.\n7. Envie o comprovante por WhatsApp, Instagram ou Discord.\n8. Ap√≥s confirma√ß√£o do pagamento, voc√™ receber√° o produto em at√© 24 horas.\n\nSe quiser, posso guiar voc√™ passo a passo ‚Äî qual etapa quer que eu explique primeiro?";
            }
            
            getHelpResponse() {
                return "üÜò PRECISA DE AJUDA?\n\nPor favor, me diga:\n\n‚Ä¢ Qual √© o problema exato?\n‚Ä¢ Com qual produto est√° tendo dificuldade?\n‚Ä¢ Quando ocorreu o problema?\n\nSe preferir falar com um atendente humano:\n\nWhatsApp: (22) 98163-6278\nInstagram: @o.dz.dev\nDiscord: https://discord.gg/PmN9QYFvvQ\n\nNormalmente respondemos em at√© 1 hora.";
            }
            
            getPriceResponse(productMentioned) {
                if (productMentioned) {
                    const products = this.getProductsByCategory(productMentioned.category);
                    if (products && products.length > 0) {
                        const product = products[0];
                        return `üí∞ ${product.name}\n\n‚Ä¢ Pre√ßo: R$ ${product.price.toFixed(2)}\n‚Ä¢ Com cupom BLACKDZ5: R$ ${(product.price * 0.95).toFixed(2)}\n‚Ä¢ Categoria: ${product.category}\n‚Ä¢ Estoque: ${product.stock} unidades\n\nQuer ver todos os produtos desta categoria ou saber mais sobre este?`;
                    }
                }
                return `üí∞ PRE√áOS NA BLACKDZ STORE:\n\nNossos pre√ßos variam conforme o produto e categoria:\n\n‚Ä¢ Streamings: A partir de R$ 5,00\n‚Ä¢ Xbox/Game Pass: A partir de R$ 9,90\n‚Ä¢ Discord: A partir de R$ 24,90\n‚Ä¢ Steam: A partir de R$ 9,90\n‚Ä¢ Contas Roblox: A partir de R$ 5,00\n‚Ä¢ Blox Fruits: A partir de R$ 6,00\n‚Ä¢ Minecraft: A partir de R$ 64,99\n\nQuer saber o pre√ßo de algum produto espec√≠fico? Me diga qual! üòä`;
            }
            
            getStockResponse(productMentioned) {
                if (productMentioned) {
                    const products = this.getProductsByCategory(productMentioned.category);
                    if (products && products.length > 0) {
                        const inStock = products.filter(p => p.stock > 0).length;
                        const total = products.length;
                        return `üì¶ ESTOQUE - ${productMentioned.category}:\n\n‚Ä¢ Produtos dispon√≠veis: ${inStock} de ${total}\n‚Ä¢ Situa√ß√£o: ${inStock === total ? 'Tudo em estoque! ‚úÖ' : 'Alguns produtos com estoque limitado'}\n\nQuer verificar estoque de algum produto espec√≠fico?`;
                    }
                }
                return `üì¶ ESTOQUE GERAL:\n\nA BlackDz Store mant√©m estoque atualizado de todos os produtos!\n\n‚Ä¢ Produtos digitais: Estoque quase ilimitado\n‚Ä¢ Contas/Keys: Reposi√ß√£o constante\n‚Ä¢ Itens f√≠sicos: Consultar disponibilidade\n\nPara verificar estoque espec√≠fico, me diga qual produto ou categoria voc√™ quer saber!`;
            }
            
            getCouponResponse() {
                return `üéÅ CUPONS DE DESCONTO:\n\nCUPOM GRATUITO:\n‚Ä¢ BLACKDZ5: 5% de desconto (uso √∫nico por pessoa)\n\nCUPONS PREMIUM (para compra):\n‚Ä¢ Cupom 10% Permanente: R$ 30,00\n‚Ä¢ Cupom 15% Permanente: R$ 50,00\n‚Ä¢ Cupom 20% Permanente: R$ 80,00\n‚Ä¢ Cupom 25% Permanente: R$ 100,00\n\nCOMO USAR:\n1. Adicione produtos ao carrinho.\n2. V√° para o carrinho.\n3. Digite o c√≥digo do cupom.\n4. Clique em 'Aplicar'.\n5. Finalize a compra.\n\nAlgum cupom espec√≠fico que voc√™ quer aplicar agora?`;
            }
            
            getReceiptResponse() {
                return `üìÑ ENVIAR COMPROVANTE:\n\nAp√≥s realizar o pagamento PIX, voc√™ tem 3 op√ß√µes para enviar o comprovante:\n\n1. WhatsApp: (22) 98163-6278\n2. Instagram: @o.dz.dev\n3. Discord: Abra ticket em https://discord.gg/PmN9QYFvvQ\n\nINFORMA√á√ïES IMPORTANTES NO COMPROVANTE:\n‚Ä¢ Nome do(s) produto(s)\n‚Ä¢ Valor pago\n‚Ä¢ Data e hora do pagamento\n‚Ä¢ Seu nome de usu√°rio na loja\n\nENTREGA: Ap√≥s envio do comprovante, seu produto ser√° entregue em at√© 24 horas!`;
            }
            
            getDeliveryResponse() {
                return `üöö PRAZOS DE ENTREGA:\n\nPRODUTOS DIGITAIS (Keys, Contas, etc.):\n‚Ä¢ At√© 24 horas ap√≥s confirma√ß√£o do pagamento (normalmente 1-2h em hor√°rio comercial)\n\nPRODUTOS SOB DEMANDA:\n‚Ä¢ Consultar disponibilidade (varia por produto)\n‚Ä¢ Geralmente 24-48 horas\n\nHOR√ÅRIO DE ATENDIMENTO:\n‚Ä¢ Todos os dias: 9h √†s 23h\n‚Ä¢ Resposta mais r√°pida: 14h √†s 22h`;
            }
            
            getGeneralResponse(message, context) {
                // Respostas inteligentes para perguntas gerais (sem markdown)
                if (message.includes('quem √© voc√™') || message.includes('o que √© voc√™')) {
                    return "Eu sou o BlackDz Assistant, um assistente virtual criado para ajudar clientes da BlackDz Store!\n\nMinhas fun√ß√µes:\n‚Ä¢ Ajudar com compras e pagamentos\n‚Ä¢ Tirar d√∫vidas sobre produtos\n‚Ä¢ Explicar como usar cupons\n‚Ä¢ Orientar sobre envio de comprovantes\n‚Ä¢ E muito mais!\n\nSou seu guia pessoal na loja.";
                }
                
                if (message.includes('como funciona') || message.includes('como √©')) {
                    return "A BlackDz Store funciona assim:\n\n1. Voc√™ escolhe produtos digitais (games, streamings, contas, etc.)\n2. Adiciona ao carrinho e finaliza a compra\n3. Paga via PIX (r√°pido e seguro)\n4. Envia o comprovante\n5. Recebe o produto em at√© 24h\n\nTudo 100% digital, seguro e com suporte completo!";
                }
                
                if (message.includes('seguro') || message.includes('confian√ßa') || message.includes('confi√°vel')) {
                    return "SEGURAN√áA NA BLACKDZ STORE:\n\n‚Ä¢ Pagamento via PIX (sistema oficial brasileiro)\n‚Ä¢ Entrega garantida ou devolu√ß√£o do dinheiro\n‚Ä¢ Suporte por m√∫ltiplos canais\n‚Ä¢ Hist√≥rico de vendas e clientes satisfeitos\n\nNossa reputa√ß√£o √© nossa maior garantia!";
                }
                
                if (message.includes('promo√ß√£o') || message.includes('oferta') || message.includes('desconto')) {
                    return "PROMO√á√ïES ATUAIS:\n\n‚Ä¢ Cupom BLACKDZ5: 5% de desconto para todos\n‚Ä¢ Produtos em destaque com pre√ßos especiais\n‚Ä¢ Compre mais, pague menos em algumas categorias\n‚Ä¢ Novidades toda semana\n\nDica: siga nosso Instagram @o.dz.dev para promo√ß√µes!";
                }
                
                // Resposta padr√£o inteligente (amplia√ß√£o de varia√ß√µes)
                const responses = [
                    "Interessante! Me conte mais sobre o que voc√™ precisa para que eu possa ajudar melhor.",
                    "Entendi a pergunta. Posso ajudar com op√ß√µes de compra, suporte, envio de comprovante ou consultar estoques.",
                    "√ìtima quest√£o! Posso explicar o processo passo a passo ou mostrar os produtos relacionados.",
                    "Posso ajudar com isso! Voc√™ est√° procurando algo espec√≠fico ou quer ver sugest√µes?"
                ];
                
                return this.getRandomResponse(responses);
            }
            
            // M√©todos auxiliares
            containsAny(text, words) {
                return words.some(word => text.includes(word));
            }
            
            getRandomResponse(responses) {
                return responses[Math.floor(Math.random() * responses.length)];
            }
            
            getProductsByCategory(category) {
                const categoryMap = {
                    'Streamings': 'streamings',
                    'Xbox/Game Pass': 'xbox',
                    'Discord': 'discord',
                    'Steam': 'steam',
                    'Contas Roblox': 'roblox',
                    'Blox Fruits': 'bloxfruits-gamepass',
                    'Scripts DBC': 'scripts',
                    'Fortnite': 'fortnite',
                    'Valorant': 'valorant',
                    'Minecraft': 'minecraft',
                    'GTA V': 'gta',
                    'Dragon Ball Rage': 'dbrage'
                };
                
                const key = categoryMap[category];
                return key ? productsData[key] : null;
            }
            
            addPersonality(response, context) {
                // Adicionar emojis baseados no contexto
                let emoji = '';
                switch(context.intent) {
                    case 'greeting': emoji = 'üëã'; break;
                    case 'farewell': emoji = context.isThankful ? 'üòä' : 'üëã'; break;
                    case 'purchase': emoji = 'üõí'; break;
                    case 'help': emoji = 'üÜò'; break;
                    case 'price': emoji = 'üí∞'; break;
                    case 'stock': emoji = 'üì¶'; break;
                    case 'coupon': emoji = 'üéÅ'; break;
                    case 'receipt': emoji = 'üìÑ'; break;
                    case 'delivery': emoji = 'üöö'; break;
                    default: emoji = 'üí°';
                }
                
                // Adicionar toque pessoal (mais varia√ß√µes)
                const personalityTouches = [
                    "\n\nEspero ter ajudado! üòä",
                    "\n\nPrecisa de mais alguma coisa?",
                    "\n\nFico √† disposi√ß√£o para outras d√∫vidas!",
                    "\n\nConte comigo para o que precisar!",
                    "\n\nSe quiser, posso mostrar produtos agora."
                ];
                
                const touch = personalityTouches[Math.floor(Math.random() * personalityTouches.length)];
                
                return `${emoji} ${response}${touch}`;
            }
        }

        // Dados dos produtos: TODOS os produtos da "loja sem blindagem" foram adicionados aqui (copiados e integrados)
        const productsData = {
            // Streamings 
            streamings: [
                { id: 1, name: "Crunchyroll + Canva (30 dias)", price: 5.00, image: "https://i.imgur.com/1aQbZkY.png", category: "Streamings", description: "Contas compartilhadas do Crunchyroll e Canva Premium por 30 dias", stock: 999 },
                { id: 2, name: "Monte seu Combo de 3 Streamings", price: 25.99, image: "üì∫", category: "Streamings", description: "Escolha 3 servi√ßos de streaming (Netflix, Prime Video, Paramount+, Crunchyroll, Canva, etc.)", stock: 999 },
                { id: 3, name: "Pacote Completo Streamings", price: 35.00, image: "üé¨", category: "Streamings", description: "Acesso a m√∫ltiplas plataformas de streaming em uma √∫nica compra", stock: 999 }
            ],
            
            // Xbox / Game Pass 
            xbox: [
                { id: 4, name: "Xbox Game Pass Ultimate - 1 M√™s - Compartilhada", price: 9.90, image: "üéÆ", category: "Xbox/Game Pass", description: "Conta compartilhada, compartilh√°vel com sua conta principal. Inclui acesso ao EA PLAY e xCloud. Dispon√≠vel em todos dispositivos.", stock: 3 },
                { id: 5, name: "Xbox Game Pass Ultimate - 1 M√™s", price: 55.90, image: "üéÆ", category: "Xbox/Game Pass", description: "Conta Privada. Inclui acesso ao EA PLAY e xCloud. Dispon√≠vel em todos dispositivos.", stock: 3 },
                { id: 6, name: "Xbox Game Pass PC key", price: 49.90, image: "üéÆ", category: "Xbox/Game Pass", description: "Key de gamepass (xbox) para PC.", stock: 3 }
            ],
            
            // Discord 
            discord: [
                { id: 5, name: "Discord Nitro - 3 Meses", price: 24.90, image: "https://i.imgur.com/3XQwqC6.png", category: "Discord", description: "Tenha acesso aos recursos premium do Discord pagando bem menos. V√°lido apenas para contas que nunca tiveram Nitro nos √∫ltimos 12 meses.", stock: 999 },
                { id: 6, name: "Decora√ß√£o Discord Aleat√≥ria", price: 35.00, image: "üé®", category: "Discord", description: "Receba uma decora√ß√£o aleat√≥ria para seu servidor Discord (pode vir qualquer uma)", stock: 999 },
                { id: 7, name: "14x Impulsos para seu server - 3 meses", price: 87.00, image: "üé®", category: "Discord", description: "Receba 14 impulsos no seu server (dura 3 meses)", stock: 999 }
            ],
            
            // Steam 
            steam: [
                { id: 7, name: "Steam KEY aleat√≥ria [ate no max 150R$]", price: 9.90, image: "https://i.imgur.com/7QJpL1D.png", category: "Steam", description: "Key Steam aleat√≥ria. Pode conter jogos de diversos valores [1 a 150 reais]!", stock: 10 },
                { id: 8, name: "Compre 1 jogo e ganhe 7 jogos [promo√ßao]", price: 29.90, image: "üéÅ", category: "Steam", description: "Super promocao, compre 1 jogo e ganhe mais 6 de Beinde [os jogos nao tem limite de valor]", stock: 3 },
                { id: 9, name: "10x Steam KEY aleat√≥ria [Premium]", price: 39.90, image: "üéÅ", category: "Steam", description: "10 Keys de jogos para Steam!", stock: 5 },
                { id: 10, name: "50x Steam KEY aleat√≥ria [Premium]", price: 70.00, image: "üéÅ", category: "Steam", description: "50 Keys de jogos para Steam!", stock: 1 }
            ],
            
            // Contas Roblox 
            roblox: [
                { id: 200, name: "2014 VAZIA S/ ITENS", price: 5.00, image: "üìÖ", category: "Contas Roblox", description: "Conta Roblox de 2014 vazia sem itens", stock: 13 },
                { id: 201, name: "2015 VAZIA S/ ITENS", price: 7.80, image: "üìÖ", category: "Contas Roblox", description: "Conta Roblox de 2015 vazia sem itens", stock: 10 },
                { id: 202, name: "2016 VAZIA SEM ITENS", price: 5.72, image: "üìÖ", category: "Contas Roblox", description: "Conta Roblox de 2016 vazia sem itens", stock: 7 },
                { id: 203, name: "2017 VAZIA S/ ITENS", price: 7.00, image: "üìÖ", category: "Contas Roblox", description: "Conta Roblox de 2017 vazia sem itens", stock: 9 },
                { id: 204, name: "2019 VAZIA SEM ITENS", price: 7.00, image: "üìÖ", category: "Contas Roblox", description: "Conta Roblox de 2019 vazia sem itens", stock: 10 },
                { id: 205, name: "2020 VAZIA SEM ITENS", price: 5.00, image: "üìÖ", category: "Contas Roblox", description: "Conta Roblox de 2020 vazia sem itens", stock: 5 }
            ],
            
            // Blox Fruits Gamepass
            "bloxfruits-gamepass": [
                { id: 36, name: "2x Money", price: 25.00, image: "üí∞", category: "Blox Fruits", subcategory: "Gamepass", description: "Gamepass 2x Money para Blox Fruits", stock: 999 },
                { id: 37, name: "2x Mastery", price: 25.00, image: "‚öîÔ∏è", category: "Blox Fruits", subcategory: "Gamepass", description: "Gamepass 2x Mastery para Blox Fruits", stock: 999 },
                { id: 38, name: "Fruit Storage", price: 25.00, image: "üì¶", category: "Blox Fruits", subcategory: "Gamepass", description: "Gamepass Fruit Storage para Blox Fruits", stock: 999 },
                { id: 39, name: "Dark Blade (Yoru)", price: 56.90, image: "üó°Ô∏è", category: "Blox Fruits", subcategory: "Gamepass", description: "Gamepass Dark Blade (Yoru) para Blox Fruits", stock: 999 },
                { id: 40, name: "Fruit Notifier", price: 110.00, image: "üîî", category: "Blox Fruits", subcategory: "Gamepass", description: "Gamepass Fruit Notifier para Blox Fruits", stock: 999 },
                { id: 41, name: "2x Drop ou Fast Boat", price: 22.90, image: "üö§", category: "Blox Fruits", subcategory: "Gamepass", description: "Gamepass 2x Drop ou Fast Boat para Blox Fruits", stock: 999 },
                { id: 42, name: "Hak Lendario", price: 18.00, image: "üëä", category: "Blox Fruits", subcategory: "Gamepass", description: "Haki Lend√°rio para Blox Fruits", stock: 100 }
            ],
            
            // Frutas Permanentes 
            "bloxfruits-frutas-permanentes": [
                { id: 100, name: "CONTROL PERM", price: 154.90, image: "üåÄ", category: "Blox Fruits", subcategory: "Frutas Permanentes", description: "Fruita Control permanente para Blox Fruits", stock: 999 },
                { id: 101, name: "DRAGON PERM", price: 176.00, image: "üêâ", category: "Blox Fruits", subcategory: "Frutas Permanentes", description: "Fruita Dragon permanente para Blox Fruits", stock: 999 },
                { id: 102, name: "TIGER PERM", price: 110.00, image: "üêÖ", category: "Blox Fruits", subcategory: "Frutas Permanentes", description: "Fruita Tiger permanente para Blox Fruits", stock: 999 },
                { id: 103, name: "PAIN PERM", price: 86.00, image: "üíÄ", category: "Blox Fruits", subcategory: "Frutas Permanentes", description: "Fruita Pain permanente para Blox Fruits", stock: 999 },
                { id: 104, name: "LIGHTNING PERM", price: 85.00, image: "‚ö°", category: "Blox Fruits", subcategory: "Frutas Permanentes", description: "Fruita Lightning permanente para Blox Fruits", stock: 999 },
                { id: 105, name: "YETI PERM", price: 110.00, image: "‚ùÑÔ∏è", category: "Blox Fruits", subcategory: "Frutas Permanentes", description: "Fruita Yeti permanente para Blox Fruits", stock: 999 },
                { id: 106, name: "GAS PERM", price: 91.00, image: "üí®", category: "Blox Fruits", subcategory: "Frutas Permanentes", description: "Fruita Gas permanente para Blox Fruits", stock: 999 },
                { id: 107, name: "GRAVITY PERM", price: 90.00, image: "üåå", category: "Blox Fruits", subcategory: "Frutas Permanentes", description: "Fruita Gravity permanente para Blox Fruits", stock: 999 },
                { id: 108, name: "CREATION PERM", price: 80.00, image: "‚ú®", category: "Blox Fruits", subcategory: "Frutas Permanentes", description: "Fruita Creation permanente para Blox Fruits", stock: 999 },
                { id: 109, name: "KITSUNE PERM", price: 159.90, image: "ü¶ä", category: "Blox Fruits", subcategory: "Frutas Permanentes", description: "Fruita Kitsune permanente para Blox Fruits", stock: 999 },
                { id: 110, name: "FALCON PERM", price: 45.90, image: "ü¶Ö", category: "Blox Fruits", subcategory: "Frutas Permanentes", description: "Fruita Falcon permanente para Blox Fruits", stock: 999 },
                { id: 111, name: "DOUGH PERM", price: 90.00, image: "ü•ñ", category: "Blox Fruits", subcategory: "Frutas Permanentes", description: "Fruita Dough permanente para Blox Fruits", stock: 999 },
                { id: 112, name: "PORTAL PERM", price: 76.90, image: "üåÄ", category: "Blox Fruits", subcategory: "Frutas Permanentes", description: "Fruita Portal permanente para Blox Fruits", stock: 999 },
                { id: 113, name: "BUDDHA PERM", price: 75.00, image: "üïâÔ∏è", category: "Blox Fruits", subcategory: "Frutas Permanentes", description: "Fruita Buddha permanente para Blox Fruits", stock: 999 },
                { id: 114, name: "VENOM PERM", price: 95.00, image: "‚ò†Ô∏è", category: "Blox Fruits", subcategory: "Frutas Permanentes", description: "Fruita Venom permanente para Blox Fruits", stock: 999 },
                { id: 115, name: "LIGHT PERM", price: 54.90, image: "üí°", category: "Blox Fruits", subcategory: "Frutas Permanentes", description: "Fruita Light permanente para Blox Fruits", stock: 999 },
                { id: 116, name: "ICE PERM", price: 35.00, image: "üßä", category: "Blox Fruits", subcategory: "Frutas Permanentes", description: "Fruita Ice permanente para Blox Fruits", stock: 999 },
                { id: 117, name: "MAGMA PERM", price: 53.90, image: "üåã", category: "Blox Fruits", subcategory: "Frutas Permanentes", description: "Fruita Magma permanente para Blox Fruits", stock: 999 },
                { id: 118, name: "T-REX PERM", price: 86.90, image: "ü¶ñ", category: "Blox Fruits", subcategory: "Frutas Permanentes", description: "Fruita T-Rex permanente para Blox Fruits", stock: 999 },
                { id: 119, name: "SPIRIT PERM", price: 91.90, image: "üëª", category: "Blox Fruits", subcategory: "Frutas Permanentes", description: "Fruita Spirit permanente para Blox Fruits", stock: 999 }
            ],
            
            // Contas Blox Fruits 
            "bloxfruits-contas": [
                { id: 120, name: "V4 MINK+CDK+GDH+LVL", price: 52.32, image: "üë§", category: "Blox Fruits", subcategory: "Contas", description: "Conta com V4 MINK, CDK, God Human e Level", stock: 3 },
                { id: 121, name: "V4 CYBORG+CDK+GDH+LV", price: 56.99, image: "üë§", category: "Blox Fruits", subcategory: "Contas", description: "Conta com V4 Cyborg, CDK, God Human e Level", stock: 10 },
                { id: 122, name: "V4 DRACO+CDK+SG+GDH", price: 75.65, image: "üë§", category: "Blox Fruits", subcategory: "Contas", description: "Conta com V4 Draco, CDK, Soul Guitar e God Human", stock: 12 },
                { id: 123, name: "V4 GHOUL+CDK+SG+GOD", price: 31.99, image: "üë§", category: "Blox Fruits", subcategory: "Contas", description: "Conta com V4 Ghoul, CDK, Soul Guitar e God Human", stock: 0 },
                { id: 124, name: "V4 SKY+CDK+GOD+LVMAX", price: 30.00, image: "üë§", category: "Blox Fruits", subcategory: "Contas", description: "Conta com V4 Sky, CDK, God Human e Level Max", stock: 10 },
                { id: 125, name: "V4 FISCH+CDK+GOD+LVL", price: 56.99, image: "üë§", category: "Blox Fruits", subcategory: "Contas", description: "Conta com V4 Fisch, CDK, God Human e Level", stock: 10 },
                { id: 126, name: "7 V4+CDK+SG+GOD+LVL", price: 105.00, image: "üë§", category: "Blox Fruits", subcategory: "Contas", description: "Conta com 7 V4, CDK, Soul Guitar, God Human e Level", stock: 5 },
                { id: 127, name: "MAMUTE+GDH+LVL 2750", price: 13.00, image: "üë§", category: "Blox Fruits", subcategory: "Contas", description: "Conta com Mamute, God Human e Level 2750", stock: 15 },
                { id: 128, name: "KITSUNE INV", price: 38.32, image: "üë§", category: "Blox Fruits", subcategory: "Contas", description: "Conta com Kitsune Invenc√≠vel", stock: 10 },
                { id: 129, name: "T-REX INV+GDH+LVL MAX", price: 13.00, image: "üë§", category: "Blox Fruits", subcategory: "Contas", description: "Conta com T-Rex Invenc√≠vel, God Human e Level Max", stock: 10 },
                { id: 130, name: "DOUGH INV+GDH+LV2750", price: 7.80, image: "üë§", category: "Blox Fruits", subcategory: "Contas", description: "Conta com Dough Invenc√≠vel, God Human e Level 2750", stock: 10 },
                { id: 131, name: "GAS INV+GDH+LVL 2750", price: 15.00, image: "üë§", category: "Blox Fruits", subcategory: "Contas", description: "Conta com Gas Invenc√≠vel, God Human e Level 2750", stock: 10 },
                { id: 132, name: "TIGER INV", price: 33.00, image: "üë§", category: "Blox Fruits", subcategory: "Contas", description: "Conta com Tiger Invenc√≠vel", stock: 20 },
                { id: 133, name: "PORTAL+GDH", price: 12.00, image: "üë§", category: "Blox Fruits", subcategory: "Contas", description: "Conta com Portal e God Human", stock: 10 },
                { id: 134, name: "CONTROL INV+GDH", price: 32.00, image: "üë§", category: "Blox Fruits", subcategory: "Contas", description: "Conta com Control Invenc√≠vel e God Human", stock: 10 },
                { id: 135, name: "GRAVITY+GDH", price: 13.00, image: "üë§", category: "Blox Fruits", subcategory: "Contas", description: "Conta com Gravity e God Human", stock: 10 }
            ],
            
            // Scripts DBC (mantidos)
            scripts: [
                { id: 140, name: "Script Custom Master", price: 30.00, image: "üëë", category: "Scripts DBC", description: "Script para Dragon Block C [1710] - Cria um NPC que vende Formas (NPC+DBCADDON)", stock: 20 },
                { id: 141, name: "Script TP Bank", price: 25.00, image: "üè¶", category: "Scripts DBC", description: "Script para Dragon Block C [1.710] - Funciona como um Banco de TP com todas as fun√ß√µes", stock: 20 },
                { id: 142, name: "Script ARMADURAS EM CUSTOM FORMS", price: 15.00, image: "üõ°Ô∏è", category: "Scripts DBC", description: "Script para Dragon Block C [1.710] - Ao transformar equipa automaticamente qualquer roupa", stock: 100 },
                { id: 143, name: "Script De Teleportes", price: 14.99, image: "üìç", category: "Scripts DBC", description: "Script para Dragon Block C [1710] - Permite teleportar para v√°rios locais", stock: 20 },
                { id: 144, name: "Script Custom Races / Custom Effects", price: 30.00, image: "üåÄ", category: "Scripts DBC", description: "Script para Dragon Block C (1710) - Cria um NPC que vende ra√ßa/effect Bio-android ou Android", stock: 20 },
                { id: 145, name: "Script De ANIMA√á√ÉO DE KI", price: 15.00, image: "üí•", category: "Scripts DBC", description: "Script de anima√ß√£o de carregar KI quando apertar tecla 'C'", stock: 100 }
            ],
            
            // Fortnite (mantidos)
            fortnite: [
                { id: 300, name: "üé™ CONTA COM LISA ROCKSTAR 1000 VBUCKS + PASSES (1 M√äS DE CLUBE)", price: 35.10, image: "üëë", category: "Fortnite", description: "A conta j√° vem com 1000 VBUCKS no total, sendo os VBUCKS do clube Fortnite. Para obter a skin da Lisa rockstar voc√™ tem que terminar o passe musical.", stock: 56 },
                { id: 301, name: "üéÅ CONTA COM LISA ROCKSTAR 2000 VBUCKS + PASSES (2 MESES DE CLUBE)", price: 55.40, image: "üëë", category: "Fortnite", description: "A conta j√° vem com 1000 VBUCKS e 2 meses de clube. Os outros 1000 VBUCKS s√£o entregues em parcelas mensais de 1000 VBUCKS junto ao clube. Para obter a skin da Lisa rockstar voc√™ tem que terminar o passe musical.", stock: 88 },
                { id: 302, name: "üíñ CONTA COM 6000 VBUCKS + 6 MESES DE CLUBE", price: 94.90, image: "üëë", category: "Fortnite", description: "A conta j√° vem com 1000 VBUCKS e 6 meses de clube. Os outros 5000 VBUCKS s√£o entregues em parcelas mensais de 1000 VBUCKS junto ao clube.", stock: 83 },
                { id: 303, name: "üíç CONTA COM 13500 VBUCKS", price: 279.90, image: "üëë", category: "Fortnite", description: "A conta vem com 13500 VBUCKS no total.", stock: 64 },
                { id: 304, name: "üíç CONTA COM SKIN GATALINA", price: 5.00, image: "üëë", category: "Fortnite", description: "A conta vem com a skin GATALINA", stock: 64 },
                { id: 305, name: "üíç CONTA COM 22 ou 23 skins", price: 50.00, image: "üëë", category: "Fortnite", description: "A conta vem com 22 ou 23 skins (e vem indiana jones)", stock: 64 },
                { id: 306, name: "üíç CONTA COM 20 skins", price: 60.00, image: "üëë", category: "Fortnite", description: "A conta vem com 20 skins (e vem ice spice)", stock: 64 }
            ],
            
            // Valorant (mantidos)
            valorant: [
                { id: 400, name: "BRONZE (1-3)", price: 47.90, image: "‚öîÔ∏è", category: "Valorant", description: "Conta Valorant com rank Bronze (1-3)", stock: 36 },
                { id: 401, name: "DIAMANTE (1-3)", price: 96.00, image: "‚öîÔ∏è", category: "Valorant", description: "Conta Valorant com rank Diamante (1-3)", stock: 46 },
                { id: 402, name: "ASCENDENT (1-3)", price: 145.00, image: "‚öîÔ∏è", category: "Valorant", description: "Conta Valorant com rank Ascendent (1-3)", stock: 1 },
                { id: 403, name: "LEVEL 20 + DADOS DE CRIACAO (100 upada a mao)", price: 69.90, image: "‚öîÔ∏è", category: "Valorant", description: "Conta Valorant level 20 com todos dados de criacao upada a mao", stock: 1 },
                { id: 404, name: "LEVEL 1 (the range feito)", price: 5.90, image: "üíé", category: "Valorant", description: "Conta Valorant lvl 1 com the range feito", stock: 9 }
            ],
            
            // Minecraft atualizado
            minecraft: [
                { id: 500, name: "MINECRAFT JAVA + BEDROCK (FULL ACESSO)", price: 64.99, image: "‚õèÔ∏è", category: "Minecraft", description: "Licen√ßa completa do Minecraft Java + Bedrock Edition. Nick alter√°vel. Acesso total a todas as funcionalidades.", stock: 999 },
                { id: 501, name: "MINECRAFT JAVA + BEDROCK (30 dias)", price: 9.90, image: "‚õèÔ∏è", category: "Minecraft", description: "Gamepass completa do Minecraft Java + Bedrock Edition.", stock: 999 }
            ],
            
            // GTA V
            gta: [
                { id: 600, name: "Conta Rockstar Licenciada para FiveM", price: 5.00, image: "üöó", category: "GTA V", description: "Conta Rockstar licenciada e verificada para uso no FiveM", stock: 999 },
                { id: 601, name: "Conta Steam para baixar GTA V", price: 18.00, image: "üéÆ", category: "GTA V", description: "Conta Steam com GTA V para download e uso pessoal", stock: 999 },
                { id: 602, name: "COMBO: Conta Rockstar + Steam", price: 15.00, image: "üíé", category: "GTA V", description: "Combo completo com conta Rockstar licenciada e conta Steam com GTA V", stock: 999 }
            ],
            
            // Dragon Ball Rage
            dbrage: [
                { id: 700, name: "Custom Anime Girl Form", price: 35.00, image: "üëß", category: "Dragon Ball Rage", description: "Forma personalizada de anime girl para seu personagem", stock: 999 },
                { id: 701, name: "2x Training EXP", price: 29.00, image: "‚ö°", category: "Dragon Ball Rage", description: "Multiplicador de experi√™ncia de treinamento (2x)", stock: 999 },
                { id: 702, name: "2x Drop Chance", price: 25.00, image: "üéÅ", category: "Dragon Ball Rage", description: "Chance aumentada de drop de itens (2x)", stock: 999 },
                { id: 703, name: "Limit Breaker", price: 23.00, image: "üî•", category: "Dragon Ball Rage", description: "Quebra os limites do seu personagem", stock: 999 },
                { id: 704, name: "Dragon Radar", price: 22.00, image: "üì°", category: "Dragon Ball Rage", description: "Radar para localizar esferas do drag√£o", stock: 999 },
                { id: 705, name: "2x Zeni", price: 16.90, image: "üí∞", category: "Dragon Ball Rage", description: "Multiplicador de Zeni (2x)", stock: 999 },
                { id: 706, name: "Custom KI Color", price: 6.00, image: "üåà", category: "Dragon Ball Rage", description: "Cor personalizada para seu KI", stock: 999 },
                { id: 707, name: "Omega SSJ", price: 5.00, image: "üí•", category: "Dragon Ball Rage", description: "Transforma√ß√£o Omega Super Saiyajin", stock: 999 },
                { id: 708, name: "Parasite Form", price: 6.50, image: "ü¶†", category: "Dragon Ball Rage", description: "Forma de parasita para seu personagem", stock: 999 },
                { id: 709, name: "Savior Form", price: 13.00, image: "üõ°Ô∏è", category: "Dragon Ball Rage", description: "Forma de salvador com habilidades especiais", stock: 999 }
            ],
            
            // Cupons
            cupons: [
                { id: 800, name: "Cupom 10% Permanente", price: 30.00, image: "üè∑Ô∏è", category: "Cupons", description: "Cupom de 10% de desconto permanente para usar em todas as compras", stock: 999 },
                { id: 801, name: "Cupom 15% Permanente", price: 50.00, image: "üè∑Ô∏è", category: "Cupons", description: "Cupom de 15% de desconto permanente para usar em todas as compras", stock: 999 },
                { id: 802, name: "Cupom 20% Permanente", price: 80.00, image: "üè∑Ô∏è", category: "Cupons", description: "Cupom de 20% de desconto permanente para usar em todas as compras", stock: 999 },
                { id: 803, name: "Cupom 25% Permanente", price: 100.00, image: "üè∑Ô∏è", category: "Cupons", description: "Cupom de 25% de desconto permanente para usar em todas as compras", stock: 999 }
            ]
        };

        // Sistema de usu√°rios ATUALIZADO (login case-insensitive)
        class UserSystem {
            constructor() {
                this.users = JSON.parse(localStorage.getItem('blackdz_users')) || [
                    { 
                        id: 1, 
                        username: "blackdz2011",  // armazenado em lowercase para consist√™ncia
                        password: "30082011dz",  // SENHA ADMIN
                        email: "admin@blackdz.com",
                        name: "Administrador",
                        isAdmin: true,
                        createdAt: new Date().toISOString()
                    }
                ];
                this.saveUsers();
            }
            
            saveUsers() {
                localStorage.setItem('blackdz_users', JSON.stringify(this.users));
            }
            
            register(username, email, password, name) {
                if (this.users.find(u => u.username.toLowerCase() === username.toLowerCase())) {
                    return { success: false, message: "Usu√°rio j√° existe!" };
                }
                
                if (this.users.find(u => u.email === email)) {
                    return { success: false, message: "Email j√° cadastrado!" };
                }
                
                if (password.length < 6) {
                    return { success: false, message: "A senha deve ter pelo menos 6 caracteres!" };
                }
                
                const newUser = {
                    id: Date.now(),
                    username: username.toLowerCase(),
                    email,
                    password,
                    name: name || username,
                    isAdmin: false,
                    createdAt: new Date().toISOString()
                };
                
                this.users.push(newUser);
                this.saveUsers();
                
                return { success: true, user: newUser };
            }
            
            login(username, password) {
                if (!username) return { success: false, message: "Usu√°rio ou senha incorretos!" };
                const user = this.users.find(u => (u.username || '').toLowerCase() === username.toLowerCase() && u.password === password);
                if (user) {
                    return { success: true, user };
                }
                return { success: false, message: "Usu√°rio ou senha incorretos!" };
            }
            
            isAdmin(username) {
                const user = this.users.find(u => u.username.toLowerCase() === username.toLowerCase());
                return user ? user.isAdmin : false;
            }
            
            getAllUsers() {
                return this.users;
            }
            
            getUserById(id) {
                return this.users.find(u => u.id === id);
            }
            
            makeAdmin(userId) {
                const user = this.getUserById(userId);
                if (user && !user.isAdmin) {
                    user.isAdmin = true;
                    this.saveUsers();
                    return true;
                }
                return false;
            }
            
            removeAdmin(userId) {
                const user = this.getUserById(userId);
                if (user && user.isAdmin && user.username !== "blackdz2011") {
                    user.isAdmin = false;
                    this.saveUsers();
                    return true;
                }
                return false;
            }
        }

        // Estado global
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        let currentCoupon = null;
        let currentBloxFruitsSubcategory = null;
        let currentPage = 1;
        const itemsPerPage = 6;
        
        // Inicializar sistemas
        const userSystem = new UserSystem();
        const adminSystem = new AdminSystem();
        const chatbot = new ChatbotSystem();

        // Elementos DOM
        const loginScreen = document.getElementById('login-screen');
        const registerScreen = document.getElementById('register-screen');
        const mainContent = document.getElementById('main-content');
        const loginForm = document.getElementById('login-form');
        const registerForm = document.getElementById('register-form');
        const loginError = document.getElementById('login-error');
        const registerError = document.getElementById('register-error');
        const goToRegister = document.getElementById('go-to-register');
        const goToLogin = document.getElementById('go-to-login');
        const loggedUserElement = document.getElementById('logged-user');
        const logoutBtn = document.getElementById('logout-btn');
        const adminLink = document.getElementById('admin-link');
        
        const categoryCards = document.querySelectorAll('.category-card');
        const navCategories = document.querySelectorAll('.nav-category');
        const backToCategories = document.querySelectorAll('.back-to-categories');
        const productsSections = document.querySelectorAll('.products-section');
        const categoriesSection = document.querySelector('.categories-section');
        const cartIcon = document.querySelector('.cart-icon');
        const cartModal = document.querySelector('.cart-modal');
        const closeCart = document.querySelector('.close-cart');
        const cartCount = document.querySelector('.cart-count');
        const cartItemsContainer = document.getElementById('cart-items');
        const cartSubtotalElement = document.getElementById('cart-subtotal');
        const cartTotalElement = document.getElementById('cart-total');
        const checkoutBtn = document.getElementById('checkout-btn');
        const clearCartBtn = document.getElementById('clear-cart');
        const checkoutModal = document.querySelector('.checkout-modal');
        const closeCheckout = document.querySelector('.close-checkout');
        const overlay = document.querySelector('.overlay');
        const checkoutTotalElement = document.getElementById('checkout-total');
        const orderItemsElement = document.getElementById('order-items');
        const orderTotalElement = document.getElementById('order-total');
        const pixKeyElement = document.getElementById('pix-key');
        const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
        const navLinks = document.querySelector('.nav-links');
        const gameSearchInput = document.getElementById('game-search-input');
        const suggestedGamesList = document.getElementById('suggested-games-list');
        const requestGameBtn = document.getElementById('request-game-btn');
        const requestItemBtn = document.getElementById('request-item-btn');
        const couponCodeInput = document.getElementById('coupon-code');
        const applyCouponBtn = document.getElementById('apply-coupon-btn');
        const couponMessage = document.getElementById('coupon-message');
        const cartDiscount = document.getElementById('cart-discount');
        const discountAmount = document.getElementById('discount-amount');
        const orderDiscount = document.getElementById('order-discount');
        const discountSummary = document.getElementById('discount-summary');
        
        // Elementos do Blox Fruits
        const subcategoryCards = document.querySelectorAll('.subcategory-card');
        const bloxfruitsGamepassGrid = document.getElementById('bloxfruits-gamepass');
        const bloxfruitsFrutasGrid = document.getElementById('bloxfruits-frutas-permanentes');
        const bloxfruitsContasGrid = document.getElementById('bloxfruits-contas');
        const bloxfruitsPagination = document.getElementById('bloxfruits-pagination');
        
        // Elementos do Admin ATUALIZADO
        const adminTabs = document.querySelectorAll('.admin-tab');
        const adminContents = document.querySelectorAll('.admin-content');
        const ordersTableBody = document.getElementById('orders-table-body');
        const chatMessages = document.getElementById('chat-messages');
        const chatInput = document.getElementById('chat-input');
        const sendMessageBtn = document.getElementById('send-message-btn');
        const usersTableBody = document.getElementById('users-table-body');
        const couponsTableBody = document.getElementById('coupons-table-body');
        const createCouponBtn = document.getElementById('create-coupon-btn');
        
        // Elementos do sistema de cupons
        const couponCodeAdmin = document.getElementById('coupon-code-admin');
        const couponDiscount = document.getElementById('coupon-discount');
        const couponType = document.getElementById('coupon-type');
        const couponSingleUse = document.getElementById('coupon-single-use');
        const couponRestricted = document.getElementById('coupon-restricted');
        const authorizedUsersSection = document.getElementById('authorized-users-section');
        const authorizedUsersList = document.getElementById('authorized-users-list');
        const addUserSelect = document.getElementById('add-user-select');
        const addUserBtn = document.getElementById('add-user-btn');
        
        // Elementos do checkout ATUALIZADO
        const whatsappOption = document.getElementById('whatsapp-option');
        const instagramOption = document.getElementById('instagram-option');
        const discordOption = document.getElementById('discord-option');
        const copyMessageContainer = document.getElementById('copy-message-container');
        const copyMessageBox = document.getElementById('copy-message-box');
        const copyMessageBtn = document.getElementById('copy-message-btn');
        const openAppBtn = document.getElementById('open-app-btn');
        const confirmPaymentBtn = document.getElementById('confirm-payment-btn');
        
        // Elementos do Chatbot ATUALIZADO
        const chatbotToggle = document.getElementById('chatbot-toggle');
        const chatbotWindow = document.getElementById('chatbot-window');
        const closeChatbot = document.getElementById('close-chatbot');
        const chatbotMessages = document.getElementById('chatbot-messages');
        const chatbotInput = document.getElementById('chatbot-input');
        const sendChatbotMessage = document.getElementById('send-chatbot-message');

        // Theme modal elements
        const themeBtn = document.getElementById('theme-btn');
        const themeModal = document.getElementById('theme-modal');
        const closeThemeBtn = document.getElementById('close-theme-btn');
        const applyThemeBtn = document.getElementById('apply-theme-btn');
        const previewThemeBtn = document.getElementById('preview-theme-btn');
        const resetThemeBtn = document.getElementById('reset-theme-btn');
        const bgUrlInput = document.getElementById('bg-url-input');
        const bgFileInput = document.getElementById('bg-file-input');
        const primaryColorInput = document.getElementById('primary-color-input');
        const secondaryColorInput = document.getElementById('secondary-color-input');
        const gradientStartInput = document.getElementById('gradient-start-input');
        const gradientEndInput = document.getElementById('gradient-end-input');
        const presetEls = document.querySelectorAll('.preset');

        // Fun√ß√£o para exibir mensagem no chatbot (SEM OP√á√ïES DE RESPOSTA R√ÅPIDA)
        function displayChatbotMessage(message, isUser = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user-message' : 'bot-message'}`;
            messageDiv.textContent = message;
            chatbotMessages.appendChild(messageDiv);
            
            // Scroll para baixo
            chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
        }

        // Inicializar chatbot
        function initializeChatbot() {
            // Limpar mensagens anteriores
            chatbotMessages.innerHTML = '';
            
            // Mensagem de boas-vindas
            displayChatbotMessage("Ol√°! üëã Eu sou o BlackDz Assistant, seu assistente virtual inteligente! Como posso ajudar voc√™ hoje na BlackDz Store? üòä");
        }

        // Inicializar sistema de login
        function initLoginSystem() {
            if (currentUser) {
                loginScreen.classList.add('hidden');
                registerScreen.classList.add('hidden');
                mainContent.style.display = 'block';
                loggedUserElement.textContent = currentUser.name || currentUser.username;
                
                // Mostrar link de admin APENAS se for administrador
                const isAdminUser = userSystem.isAdmin(currentUser.username || currentUser);
                if (isAdminUser) {
                    adminLink.style.display = 'inline-block';
                } else {
                    adminLink.style.display = 'none';
                }
                
                // Inicializar chatbot
                initializeChatbot();
            } else {
                loginScreen.classList.remove('hidden');
                registerScreen.classList.add('hidden');
                mainContent.style.display = 'none';
                adminLink.style.display = 'none';
            }
        }

        // Mostrar tela de login
        function showLoginScreen() {
            loginScreen.classList.remove('hidden');
            registerScreen.classList.add('hidden');
            loginError.style.display = 'none';
        }

        // Mostrar tela de registro
        function showRegisterScreen() {
            loginScreen.classList.add('hidden');
            registerScreen.classList.remove('hidden');
            registerError.style.display = 'none';
        }

        // Login
        loginForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            const result = userSystem.login(username, password);
            
            if (result.success) {
                currentUser = result.user;
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                
                loginError.style.display = 'none';
                loginScreen.classList.add('hidden');
                registerScreen.classList.add('hidden');
                mainContent.style.display = 'block';
                loggedUserElement.textContent = result.user.name || result.user.username;
                
                // Mostrar link de admin APENAS se for administrador (usando userSystem)
                const isAdminUser = userSystem.isAdmin(result.user.username);
                adminLink.style.display = isAdminUser ? 'inline-block' : 'none';
                
                initializeProducts();
                updateCart();
                
                // Inicializar chatbot
                initializeChatbot();
                
                // Scroll para o topo
                window.scrollTo({ top: 0, behavior: 'smooth' });
            } else {
                loginError.textContent = result.message;
                loginError.style.display = 'block';
            }
        });

        // Registro
        registerForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const username = document.getElementById('reg-username').value;
            const email = document.getElementById('reg-email').value;
            const password = document.getElementById('reg-password').value;
            const confirmPassword = document.getElementById('reg-confirm-password').value;
            
            if (password !== confirmPassword) {
                registerError.textContent = "As senhas n√£o coincidem!";
                registerError.style.display = 'block';
                return;
            }
            
            const result = userSystem.register(username, email, password, username);
            
            if (result.success) {
                currentUser = result.user;
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                
                registerError.style.display = 'none';
                loginScreen.classList.add('hidden');
                registerScreen.classList.add('hidden');
                mainContent.style.display = 'block';
                loggedUserElement.textContent = result.user.name || result.user.username;
                
                // Ocultar link admin para usu√°rios normais
                adminLink.style.display = 'none';
                
                initializeProducts();
                updateCart();
                
                // Inicializar chatbot
                initializeChatbot();
                
                alert(`Bem-vindo, ${username}! Sua conta foi criada com sucesso.`);
            } else {
                registerError.textContent = result.message;
                registerError.style.display = 'block';
            }
        });

        // Alternar entre login e registro
        goToRegister.addEventListener('click', showRegisterScreen);
        goToLogin.addEventListener('click', showLoginScreen);

        // Logout
        logoutBtn.addEventListener('click', function() {
            currentUser = null;
            currentCoupon = null;
            localStorage.removeItem('currentUser');
            initLoginSystem();
        });

        // Inicializar produtos
        function initializeProducts() {
            // Inicializar jogos sugeridos
            initializeSuggestedGames();
            
            // Para cada categoria principal
            for (const category in productsData) {
                const productsGrid = document.getElementById(`${category}-products`);
                if (!productsGrid) continue;
                
                productsGrid.innerHTML = '';
                
                productsData[category].forEach(product => {
                    createProductCard(product, productsGrid);
                });
            }
            
            // Inicializar subcategorias do Blox Fruits
            initializeBloxFruitsSubcategories();
            
            // Adicionar eventos aos bot√µes de produto
            addProductEventListeners();
        }

        // Inicializar jogos sugeridos
        function initializeSuggestedGames() {
            const suggestedGames = [
                { name: "Red Dead Redemption 2", icon: "fas fa-horse" },
                { name: "Cyberpunk 2077", icon: "fas fa-city" },
                { name: "Elden Ring", icon: "fas fa-crown" },
                { name: "The Witcher 3", icon: "fas fa-dragon" },
                { name: "Call of Duty: Modern Warfare II", icon: "fas fa-gun" },
                { name: "FIFA 23", icon: "fas fa-futbol" },
                { name: "God of War", icon: "fas fa-axe" },
                { name: "Spider-Man: Miles Morales", icon: "fas fa-spider" },
                { name: "Hogwarts Legacy", icon: "fas fa-hat-wizard" },
                { name: "Resident Evil 4 Remake", icon: "fas fa-virus" },
                { name: "Diablo IV", icon: "fas fa-skull" },
                { name: "Star Wars Jedi: Survivor", icon: "fas fa-jedi" },
                { name: "Dead Space Remake", icon: "fas fa-space-shuttle" },
                { name: "Street Fighter 6", icon: "fas fa-fist-raised" },
                { name: "Final Fantasy XVI", icon: "fas fa-sword" },
                { name: "Baldur's Gate 3", icon: "fas fa-dice-d20" },
                { name: "Dead Island 2", icon: "fas fa-biohazard" },
                { name: "Atomic Heart", icon: "fas fa-atom" },
                { name: "Forza Horizon 5", icon: "fas fa-car" },
                { name: "Halo Infinite", icon: "fas fa-helmet-battle" }
            ];
            
            suggestedGamesList.innerHTML = '';
            suggestedGames.forEach(game => {
                const gameElement = document.createElement('div');
                gameElement.className = 'suggested-game';
                gameElement.setAttribute('data-game', game.name);
                gameElement.innerHTML = `
                    <i class="${game.icon}"></i>
                    <h4>${game.name}</h4>
                    <p>Consultar pre√ßo</p>
                `;
                suggestedGamesList.appendChild(gameElement);
            });
            
            // Adicionar eventos
            document.querySelectorAll('.suggested-game').forEach(game => {
                game.addEventListener('click', function() {
                    const gameName = this.getAttribute('data-game');
                    const encodedMessage = encodeURIComponent(`Ol√° BlackDz Store! Gostaria de saber o pre√ßo do jogo: ${gameName}`);
                    window.open(`https://wa.me/5522981636278?text=${encodedMessage}`, '_blank');
                });
            });
        }

        // Inicializar subcategorias do Blox Fruits com pagina√ß√£o
        function initializeBloxFruitsSubcategories() {
            // Gamepass
            bloxfruitsGamepassGrid.innerHTML = '';
            const gamepassProducts = productsData["bloxfruits-gamepass"] || [];
            gamepassProducts.forEach(product => {
                createProductCard(product, bloxfruitsGamepassGrid);
            });
            
            // Frutas Permanentes
            bloxfruitsFrutasGrid.innerHTML = '';
            const frutasProducts = productsData["bloxfruits-frutas-permanentes"] || [];
            frutasProducts.forEach(product => {
                createProductCard(product, bloxfruitsFrutasGrid);
            });
            
            // Contas
            bloxfruitsContasGrid.innerHTML = '';
            const contasProducts = productsData["bloxfruits-contas"] || [];
            contasProducts.forEach(product => {
                createProductCard(product, bloxfruitsContasGrid);
            });
        }

        // Criar card de produto (agora suporta imagem URL; se n√£o tiver, usa o √≠cone/emoji)
        function createProductCard(product, container) {
            const stockClass = product.stock < 10 ? 'low-stock' : 'in-stock';
            const stockText = product.stock < 10 ? `Apenas ${product.stock} restantes!` : `Estoque: ${product.stock}`;
            
            const productCard = document.createElement('div');
            productCard.className = 'product-card';

            // Image: se for URL (http/https) usa <img>, sen√£o mostra o emoji/texto
            let imageHtml = '';
            if (product.image && (product.image.startsWith('http://') || product.image.startsWith('https://'))) {
                imageHtml = `<img src="${product.image}" alt="${product.name}">`;
            } else {
                // mant√©m o √≠cone/emoji
                imageHtml = `<span style="font-size: 3.5rem;">${product.image || 'üéÆ'}</span>`;
            }

            productCard.innerHTML = `
                <div class="product-badge">${product.category}</div>
                <div class="product-image">
                    ${imageHtml}
                </div>
                <div class="product-info">
                    <div class="product-category">${product.category}${product.subcategory ? ' ‚Ä¢ ' + product.subcategory : ''}</div>
                    <h3 class="product-title">${product.name}</h3>
                    <p class="product-description">${product.description}</p>
                    <div class="product-price">R$ ${product.price.toFixed(2)}</div>
                    <div class="product-stock ${stockClass}">${stockText}</div>
                    <div class="product-actions">
                        <button class="btn btn-success buy-now-btn" data-id="${product.id}">Comprar Agora</button>
                        <button class="btn add-to-cart-btn" data-id="${product.id}">Adicionar ao Carrinho</button>
                    </div>
                </div>
            `;
            container.appendChild(productCard);
        }

        // Mostrar produtos com pagina√ß√£o
        function showProductsWithPagination(products, container, paginationContainer) {
            container.innerHTML = '';
            
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const paginatedProducts = products.slice(startIndex, endIndex);
            
            paginatedProducts.forEach(product => {
                createProductCard(product, container);
            });
            
            // Criar pagina√ß√£o
            const totalPages = Math.ceil(products.length / itemsPerPage);
            
            if (totalPages > 1) {
                paginationContainer.innerHTML = '';
                
                for (let i = 1; i <= totalPages; i++) {
                    const pageBtn = document.createElement('button');
                    pageBtn.className = `page-btn ${i === currentPage ? 'active' : ''}`;
                    pageBtn.textContent = i;
                    pageBtn.addEventListener('click', () => {
                        currentPage = i;
                        showProductsWithPagination(products, container, paginationContainer);
                        addProductEventListeners();
                    });
                    paginationContainer.appendChild(pageBtn);
                }
                
                paginationContainer.style.display = 'flex';
            } else {
                paginationContainer.style.display = 'none';
            }
        }

        // Mostrar subcategoria do Blox Fruits com pagina√ß√£o
        function showBloxFruitsSubcategory(subcategory) {
            currentBloxFruitsSubcategory = subcategory;
            currentPage = 1;
            
            // Esconder todas as grids
            bloxfruitsGamepassGrid.style.display = 'none';
            bloxfruitsFrutasGrid.style.display = 'none';
            bloxfruitsContasGrid.style.display = 'none';
            bloxfruitsPagination.style.display = 'none';
            
            let products = [];
            let container = null;
            
            switch(subcategory) {
                case 'gamepass':
                    container = bloxfruitsGamepassGrid;
                    products = productsData["bloxfruits-gamepass"] || [];
                    container.style.display = 'grid';
                    container.innerHTML = '';
                    products.forEach(product => createProductCard(product, container));
                    break;
                    
                case 'frutas-permanentes':
                    container = bloxfruitsFrutasGrid;
                    products = productsData["bloxfruits-frutas-permanentes"] || [];
                    container.style.display = 'grid';
                    showProductsWithPagination(products, container, bloxfruitsPagination);
                    break;
                    
                case 'contas':
                    container = bloxfruitsContasGrid;
                    products = productsData["bloxfruits-contas"] || [];
                    container.style.display = 'grid';
                    showProductsWithPagination(products, container, bloxfruitsPagination);
                    break;
            }
            
            addProductEventListeners();
        }

        // Adicionar eventos aos bot√µes de produto
        function addProductEventListeners() {
            // Adicionar eventos aos bot√µes de produto
            document.querySelectorAll('.add-to-cart-btn').forEach(button => {
                // remove existing handlers to avoid duplicates
                button.replaceWith(button.cloneNode(true));
            });
            document.querySelectorAll('.buy-now-btn').forEach(button => {
                button.replaceWith(button.cloneNode(true));
            });

            // reselect after clone
            document.querySelectorAll('.add-to-cart-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const productId = parseInt(this.getAttribute('data-id'));
                    addToCart(productId);
                    
                    const originalText = this.textContent;
                    this.textContent = 'Adicionado!';
                    this.style.background = 'var(--success)';
                    setTimeout(() => {
                        this.textContent = originalText;
                        this.style.background = '';
                    }, 1000);
                });
            });
            
            // Adicionar eventos aos bot√µes "Comprar Agora"
            document.querySelectorAll('.buy-now-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const productId = parseInt(this.getAttribute('data-id'));
                    addToCart(productId);
                    cartModal.classList.add('active');
                    overlay.classList.add('active');
                    updateCart();
                });
            });
        }

        // Adicionar produto ao carrinho
        function addToCart(productId) {
            let product = null;
            
            // Procurar o produto em todas as categorias
            for (const category in productsData) {
                const found = productsData[category].find(p => p.id === productId);
                if (found) {
                    product = found;
                    break;
                }
            }
            
            if (!product) return;
            
            // Verificar se o produto j√° est√° no carrinho
            const existingItem = cart.find(item => item.id === productId);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({
                    id: product.id,
                    name: product.name,
                    price: product.price,
                    image: product.image,
                    category: product.category,
                    subcategory: product.subcategory,
                    quantity: 1
                });
            }
            
            updateCart();
            saveCartToStorage();
        }

        // Remover item do carrinho
        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            updateCart();
            saveCartToStorage();
        }

        // Atualizar quantidade do item no carrinho
        function updateCartItemQuantity(productId, newQuantity) {
            if (newQuantity < 1) {
                removeFromCart(productId);
                return;
            }
            
            const item = cart.find(item => item.id === productId);
            if (item) {
                item.quantity = newQuantity;
                updateCart();
                saveCartToStorage();
            }
        }

        // Calcular totais do carrinho
        function calculateCartTotals() {
            let subtotal = 0;
            cart.forEach(item => {
                subtotal += item.price * item.quantity;
            });
            
            let discount = 0;
            if (currentCoupon) {
                if (currentCoupon.type === 'percentage') {
                    discount = subtotal * (currentCoupon.discount / 100);
                } else {
                    discount = currentCoupon.discount;
                }
            }
            
            const total = subtotal - discount;
            
            return {
                subtotal: Math.max(0, subtotal),
                discount: Math.max(0, discount),
                total: Math.max(0, total)
            };
        }

        // Atualizar carrinho
        function updateCart() {
            // Atualizar contador
            const totalItems = cart.reduce((total, item) => total + item.quantity, 0);
            cartCount.textContent = totalItems;
            
            // Atualizar itens do carrinho
            cartItemsContainer.innerHTML = '';
            
            if (cart.length === 0) {
                cartItemsContainer.innerHTML = `
                    <div class="empty-cart-message">
                        <i class="fas fa-shopping-cart"></i>
                        <p>Seu carrinho est√° vazio</p>
                    </div>
                `;
                cartSubtotalElement.textContent = 'R$ 0,00';
                cartTotalElement.textContent = 'R$ 0,00';
                cartDiscount.style.display = 'none';
                return;
            }
            
            const totals = calculateCartTotals();
            
            cart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                
                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item';
                cartItem.innerHTML = `
                    <div class="cart-item-image">
                        <span style="font-size: 2rem;">${(item.image && (item.image.startsWith('http://') || item.image.startsWith('https://'))) ? '<img src=\"' + item.image + '\" style=\"max-width:100%; max-height:100%; object-fit:cover; border-radius:6px;\">' : item.image}</span>
                    </div>
                    <div class="cart-item-info">
                        <h4 class="cart-item-title">${item.name}</h4>
                        <div class="cart-item-price">R$ ${item.price.toFixed(2)}</div>
                        <div class="cart-item-quantity">
                            <button class="quantity-btn decrease-btn" data-id="${item.id}">-</button>
                            <span>${item.quantity}</span>
                            <button class="quantity-btn increase-btn" data-id="${item.id}">+</button>
                        </div>
                        <div style="margin-top: 5px; font-size: 0.9rem;">Subtotal: R$ ${itemTotal.toFixed(2)}</div>
                    </div>
                    <button class="cart-item-remove" data-id="${item.id}">
                        <i class="fas fa-trash"></i>
                    </button>
                `;
                cartItemsContainer.appendChild(cartItem);
            });
            
            // Atualizar totais
            cartSubtotalElement.textContent = `R$ ${totals.subtotal.toFixed(2)}`;
            cartTotalElement.textContent = `R$ ${totals.total.toFixed(2)}`;
            
            // Atualizar desconto
            if (currentCoupon && totals.discount > 0) {
                discountAmount.textContent = `-R$ ${totals.discount.toFixed(2)}`;
                cartDiscount.style.display = 'flex';
            } else {
                cartDiscount.style.display = 'none';
            }
            
            // Adicionar eventos aos bot√µes
            document.querySelectorAll('.cart-item-remove').forEach(button => {
                button.addEventListener('click', function() {
                    const productId = parseInt(this.getAttribute('data-id'));
                    removeFromCart(productId);
                });
            });
            
            document.querySelectorAll('.decrease-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const productId = parseInt(this.getAttribute('data-id'));
                    const item = cart.find(item => item.id === productId);
                    if (item) {
                        updateCartItemQuantity(productId, item.quantity - 1);
                    }
                });
            });
            
            document.querySelectorAll('.increase-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const productId = parseInt(this.getAttribute('data-id'));
                    const item = cart.find(item => item.id === productId);
                    if (item) {
                        updateCartItemQuantity(productId, item.quantity + 1);
                    }
                });
            });
        }

        // Aplicar cupom
        function applyCoupon() {
            const code = couponCodeInput.value.trim();
            if (!code) {
                couponMessage.textContent = 'Digite um c√≥digo de cupom';
                couponMessage.className = 'coupon-message coupon-error';
                couponMessage.style.display = 'block';
                return;
            }
            
            if (!currentUser) {
                couponMessage.textContent = 'Fa√ßa login para usar cupons';
                couponMessage.className = 'coupon-message coupon-error';
                couponMessage.style.display = 'block';
                return;
            }
            
            const validation = adminSystem.validateCoupon(code, currentUser.id);
            
            if (validation.valid) {
                currentCoupon = {
                    code: code,
                    discount: validation.discount,
                    type: validation.type
                };
                
                couponMessage.textContent = `Cupom "${code}" aplicado com sucesso!`;
                couponMessage.className = 'coupon-message coupon-success';
                couponMessage.style.display = 'block';
                couponCodeInput.value = '';
                
                updateCart();
            } else {
                couponMessage.textContent = validation.message;
                couponMessage.className = 'coupon-message coupon-error';
                couponMessage.style.display = 'block';
            }
        }

        // Salvar carrinho no localStorage
        function saveCartToStorage() {
            localStorage.setItem('cart', JSON.stringify(cart));
        }

        // Limpar carrinho
        function clearCart() {
            cart = [];
            currentCoupon = null;
            updateCart();
            saveCartToStorage();
        }

        // Navegar para categoria
        function showCategory(category) {
            if (category === 'all') {
                categoriesSection.style.display = 'block';
                productsSections.forEach(section => {
                    section.style.display = 'none';
                });
                window.scrollTo({ top: 0, behavior: 'smooth' });
                return;
            }
            
            categoriesSection.style.display = 'none';
            productsSections.forEach(section => {
                section.style.display = 'none';
            });
            
            const targetSection = document.getElementById(`products-${category}`);
            if (targetSection) {
                targetSection.style.display = 'block';
                window.scrollTo({ top: 0, behavior: 'smooth' });
                
                // Resetar estados
                if (category === 'bloxfruits') {
                    bloxfruitsGamepassGrid.style.display = 'none';
                    bloxfruitsFrutasGrid.style.display = 'none';
                    bloxfruitsContasGrid.style.display = 'none';
                    bloxfruitsPagination.style.display = 'none';
                    currentBloxFruitsSubcategory = null;
                }
                
                // Se for admin, carregar dados
                if (category === 'admin') {
                    if (currentUser && userSystem.isAdmin(currentUser.username)) {
                        loadAdminOrders();
                        loadAdminUsers();
                        loadAdminCoupons();
                        loadChatMessages();
                        populateUserSelect();
                    } else {
                        showCategory('all');
                        alert('Acesso negado! Voc√™ precisa ser administrador.');
                    }
                }
            }
        }

        // Atualizar resumo do pedido no checkout
        function updateOrderSummary() {
            orderItemsElement.innerHTML = '';
            
            const totals = calculateCartTotals();
            
            cart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                
                const orderItem = document.createElement('div');
                orderItem.className = 'order-item';
                orderItem.innerHTML = `
                    <span>${item.name} x${item.quantity}</span>
                    <span>R$ ${itemTotal.toFixed(2)}</span>
                `;
                orderItemsElement.appendChild(orderItem);
            });
            
            orderTotalElement.textContent = `R$ ${totals.total.toFixed(2)}`;
            checkoutTotalElement.textContent = `R$ ${totals.total.toFixed(2)}`;
            
            // Atualizar desconto
            if (currentCoupon && totals.discount > 0) {
                discountSummary.textContent = `-R$ ${totals.discount.toFixed(2)}`;
                orderDiscount.style.display = 'flex';
            } else {
                orderDiscount.style.display = 'none';
            }
        }

        // Carregar pedidos no painel admin
        function loadAdminOrders() {
            ordersTableBody.innerHTML = '';
            const orders = adminSystem.getOrders();
            
            if (orders.length === 0) {
                ordersTableBody.innerHTML = `
                    <tr>
                        <td colspan="7" style="text-align: center; padding: 30px;">
                            Nenhum pedido encontrado
                        </td>
                    </tr>
                `;
                return;
            }
            
            orders.forEach(order => {
                const date = new Date(order.createdAt);
                const formattedDate = `${date.getDate()}/${date.getMonth()+1}/${date.getFullYear()} ${date.getHours()}:${String(date.getMinutes()).padStart(2,'0')}`;
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>#${order.id}</td>
                    <td>${order.userName || 'An√¥nimo'}</td>
                    <td>${order.items ? order.items.length : 0} produto(s)</td>
                    <td>R$ ${order.total ? order.total.toFixed(2) : '0.00'}</td>
                    <td>
                        <span class="order-status ${order.status === 'pending' ? 'status-pending' : order.status === 'completed' ? 'status-completed' : 'status-cancelled'}">
                            ${order.status === 'pending' ? 'Pendente' : 
                              order.status === 'completed' ? 'Conclu√≠do' : 'Cancelado'}
                        </span>
                    </td>
                    <td>${formattedDate}</td>
                    <td>
                        <button class="btn btn-secondary" onclick="viewOrderDetails(${order.id})" style="padding: 5px 10px; font-size: 0.8rem;">
                            <i class="fas fa-eye"></i>
                        </button>
                        ${order.status === 'pending' ? `
                            <button class="btn btn-success" onclick="updateOrderStatus(${order.id}, 'completed')" style="padding: 5px 10px; font-size: 0.8rem;">
                                <i class="fas fa-check"></i>
                            </button>
                            <button class="btn btn-danger" onclick="updateOrderStatus(${order.id}, 'cancelled')" style="padding: 5px 10px; font-size: 0.8rem;">
                                <i class="fas fa-times"></i>
                            </button>
                        ` : ''}
                    </td>
                `;
                ordersTableBody.appendChild(row);
            });
        }

        // Carregar usu√°rios no painel admin (agora inclui bot√£o para ver detalhes e ver compras do user)
        function loadAdminUsers() {
            usersTableBody.innerHTML = '';
            const users = userSystem.getAllUsers();
            
            if (users.length === 0) {
                usersTableBody.innerHTML = `
                    <tr>
                        <td colspan="6" style="text-align: center; padding: 30px;">
                            Nenhum usu√°rio encontrado
                        </td>
                    </tr>
                `;
                return;
            }
            
            users.forEach(user => {
                const date = new Date(user.createdAt);
                const formattedDate = `${date.getDate()}/${date.getMonth()+1}/${date.getFullYear()}`;
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${user.id}</td>
                    <td>${user.username}</td>
                    <td>${user.email}</td>
                    <td>
                        <span class="user-role ${user.isAdmin ? 'role-admin' : 'role-user'}">
                            ${user.isAdmin ? 'Administrador' : 'Usu√°rio'}
                        </span>
                    </td>
                    <td>${formattedDate}</td>
                    <td>
                        <button class="btn btn-secondary" onclick="viewUserDetails(${user.id})" style="padding: 5px 10px; font-size: 0.8rem;">
                            <i class="fas fa-eye"></i> Ver
                        </button>
                        <button class="btn btn-info" onclick="viewUserOrders(${user.id})" style="padding: 5px 10px; font-size: 0.8rem; background: var(--primary);">
                            <i class="fas fa-receipt"></i> Compras
                        </button>
                        ${!user.isAdmin ? `
                            <button class="btn btn-warning" onclick="makeUserAdmin(${user.id})" style="padding: 5px 10px; font-size: 0.8rem; background: var(--warning); color: #000;">
                                <i class="fas fa-user-shield"></i> Tornar Admin
                            </button>
                        ` : user.username !== 'blackdz2011' ? `
                            <button class="btn btn-danger" onclick="removeUserAdmin(${user.id})" style="padding: 5px 10px; font-size: 0.8rem;">
                                <i class="fas fa-user-times"></i> Remover Admin
                            </button>
                        ` : 'Usu√°rio Principal'}
                    </td>
                `;
                usersTableBody.appendChild(row);
            });
        }

        // Carregar cupons no painel admin
        function loadAdminCoupons() {
            couponsTableBody.innerHTML = '';
            const coupons = adminSystem.getCoupons();
            
            if (coupons.length === 0) {
                couponsTableBody.innerHTML = `
                    <tr>
                        <td colspan="7" style="text-align: center; padding: 30px;">
                            Nenhum cupom encontrado
                        </td>
                    </tr>
                `;
                return;
            }
            
            coupons.forEach(coupon => {
                // Converter IDs de usu√°rios autorizados para nomes
                const authorizedNames = coupon.authorizedUsers.map(userId => {
                    const user = userSystem.getUserById(userId);
                    return user ? user.username : `ID: ${userId}`;
                }).join(', ') || 'Todos';
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${coupon.code}</td>
                    <td>${coupon.discount}${coupon.type === 'percentage' ? '%' : ' reais'}</td>
                    <td>${coupon.isSingleUse ? 'Uso √önico' : 'M√∫ltiplo'}</td>
                    <td>${coupon.usedBy.length}</td>
                    <td>${authorizedNames}</td>
                    <td>
                        <span class="order-status ${coupon.isActive ? 'status-completed' : 'status-cancelled'}">
                            ${coupon.isActive ? 'Ativo' : 'Inativo'}
                        </span>
                    </td>
                    <td>
                        <button class="btn btn-secondary" onclick="toggleCoupon('${coupon.code}')" style="padding: 5px 10px; font-size: 0.8rem;">
                            ${coupon.isActive ? 'Desativar' : 'Ativar'}
                        </button>
                        ${coupon.isRestricted ? `
                            <button class="btn btn-info" onclick="manageAuthorizedUsers('${coupon.code}')" style="padding: 5px 10px; font-size: 0.8rem; background: var(--primary);">
                                <i class="fas fa-users"></i> Gerenciar
                            </button>
                        ` : ''}
                    </td>
                `;
                couponsTableBody.appendChild(row);
            });
        }

        // Popular select de usu√°rios
        function populateUserSelect() {
            addUserSelect.innerHTML = '<option value="">Selecione um usu√°rio...</option>';
            const users = userSystem.getAllUsers();
            
            users.forEach(user => {
                if (!user.isAdmin) { // N√£o adicionar admins por padr√£o
                    const option = document.createElement('option');
                    option.value = user.id;
                    option.textContent = `${user.username} (${user.email})`;
                    addUserSelect.appendChild(option);
                }
            });
        }

        // Gerenciar usu√°rios autorizados para um cupom
        function manageAuthorizedUsers(couponCode) {
            const coupon = adminSystem.getCoupons().find(c => c.code === couponCode);
            if (!coupon) return;
            
            let usersList = 'Usu√°rios autorizados:\n\n';
            coupon.authorizedUsers.forEach(userId => {
                const user = userSystem.getUserById(userId);
                usersList += `‚Ä¢ ${user ? user.username : `ID: ${userId}`}\n`;
            });
            
            const action = prompt(`${usersList}\n\nDigite:\n1. Para adicionar um usu√°rio\n2. Para remover um usu√°rio\n\nOu "cancelar" para sair`);
            
            if (action === '1') {
                const userId = prompt('Digite o ID do usu√°rio para autorizar:');
                if (userId && !isNaN(userId)) {
                    if (adminSystem.addAuthorizedUser(couponCode, parseInt(userId))) {
                        alert('Usu√°rio autorizado com sucesso!');
                        loadAdminCoupons();
                    } else {
                        alert('Erro ao autorizar usu√°rio.');
                    }
                }
            } else if (action === '2') {
                const userId = prompt('Digite o ID do usu√°rio para remover:');
                if (userId && !isNaN(userId)) {
                    if (adminSystem.removeAuthorizedUser(couponCode, parseInt(userId))) {
                        alert('Usu√°rio removido com sucesso!');
                        loadAdminCoupons();
                    } else {
                        alert('Erro ao remover usu√°rio.');
                    }
                }
            }
        }

        // Carregar mensagens do chat
        function loadChatMessages() {
            chatMessages.innerHTML = '';
            const messages = adminSystem.getMessages();
            
            if (messages.length === 0) {
                chatMessages.innerHTML = `
                    <div style="text-align: center; padding: 30px; color: #777;">
                        Nenhuma mensagem no chat. As mensagens aparecer√£o quando clientes ou administradores enviarem mensagens aqui.
                    </div>
                `;
                return;
            }
            
            // Ordenar mensagens por timestamp
            messages.sort((a, b) => new Date(a.timestamp) - new Date(b.timestamp));
            
            messages.forEach(msg => {
                const messageDiv = document.createElement('div');
                messageDiv.className = `chat-message ${msg.isAdmin ? 'message-admin' : 'message-user'}`;
                messageDiv.innerHTML = `
                    <div style="font-weight: bold; margin-bottom: 5px;">
                        ${msg.isAdmin ? 'üëë Administrador' : 'üë§ ' + msg.sender}
                        <span style="font-size: 0.8rem; color: #aaa; margin-left: 10px;">
                            ${new Date(msg.timestamp).toLocaleString('pt-BR')}
                        </span>
                    </div>
                    <div>${msg.message}</div>
                `;
                chatMessages.appendChild(messageDiv);
            });
            
            // Scroll autom√°tico para a √∫ltima mensagem
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Enviar mensagem no chat
        function sendChatMessage() {
            const message = chatInput.value.trim();
            if (!message) return;
            
            adminSystem.sendMessage(currentUser.name, message, currentUser.isAdmin);
            chatInput.value = '';
            loadChatMessages();
        }

        // Criar novo cupom
        function createNewCoupon() {
            const code = couponCodeAdmin.value.trim();
            const discountValue = parseFloat(couponDiscount.value);
            const type = couponType.value;
            const isSingleUse = couponSingleUse.checked;
            const isRestricted = couponRestricted.checked;
            
            if (!code) {
                alert('Digite um c√≥digo para o cupom!');
                return;
            }
            
            if (isNaN(discountValue) || discountValue <= 0) {
                alert('Digite um valor de desconto v√°lido!');
                return;
            }
            
            // Coletar usu√°rios autorizados
            const authorizedUsers = [];
            if (isRestricted) {
                const authElements = authorizedUsersList.querySelectorAll('.authorized-user');
                authElements.forEach(el => {
                    const userId = parseInt(el.getAttribute('data-user-id'));
                    if (userId) authorizedUsers.push(userId);
                });
            }
            
            adminSystem.createCoupon(code, discountValue, type, isSingleUse, isRestricted, authorizedUsers);
            
            // Limpar formul√°rio
            couponCodeAdmin.value = '';
            couponDiscount.value = '';
            couponSingleUse.checked = false;
            couponRestricted.checked = false;
            authorizedUsersSection.style.display = 'none';
            authorizedUsersList.innerHTML = '';
            
            loadAdminCoupons();
            
            // Mudar para a aba de cupons
            adminTabs.forEach(t => t.classList.remove('active'));
            adminContents.forEach(c => c.classList.remove('active'));
            document.querySelector('.admin-tab[data-tab="coupons"]').classList.add('active');
            document.getElementById('coupons-content').classList.add('active');
            
            alert(`Cupom ${code} criado com sucesso!`);
        }

        // Event Listeners
        categoryCards.forEach(card => {
            card.addEventListener('click', function() {
                const category = this.getAttribute('data-category');
                showCategory(category);
            });
        });

        navCategories.forEach(nav => {
            nav.addEventListener('click', function(e) {
                e.preventDefault();
                const category = this.getAttribute('data-category');
                showCategory(category);
                navLinks.classList.remove('active');
            });
        });

        backToCategories.forEach(backBtn => {
            backBtn.addEventListener('click', function() {
                showCategory('all');
            });
        });

        // Subcategorias do Blox Fruits
        subcategoryCards.forEach(card => {
            card.addEventListener('click', function() {
                const subcategory = this.getAttribute('data-subcategory');
                showBloxFruitsSubcategory(subcategory);
            });
        });

        // Carrinho e modais
        cartIcon.addEventListener('click', () => {
            cartModal.classList.add('active');
            overlay.classList.add('active');
        });

        closeCart.addEventListener('click', () => {
            cartModal.classList.remove('active');
            overlay.classList.remove('active');
        });

        overlay.addEventListener('click', () => {
            cartModal.classList.remove('active');
            checkoutModal.classList.remove('active');
            // fechar theme modal se aberto
            themeModal.classList.remove('active');
            overlay.classList.remove('active');
        });

        clearCartBtn.addEventListener('click', clearCart);

        applyCouponBtn.addEventListener('click', applyCoupon);

        couponCodeInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                applyCoupon();
            }
        });

        checkoutBtn.addEventListener('click', () => {
            if (cart.length === 0) {
                alert('Seu carrinho est√° vazio! Adicione produtos antes de finalizar a compra.');
                return;
            }
            
            if (!currentUser) {
                alert('Fa√ßa login para finalizar a compra!');
                return;
            }
            
            updateOrderSummary();
            
            cartModal.classList.remove('active');
            checkoutModal.classList.add('active');
            overlay.classList.add('active');
            
            // Resetar op√ß√µes de envio
            copyMessageContainer.style.display = 'none';
        });

        closeCheckout.addEventListener('click', () => {
            checkoutModal.classList.remove('active');
            overlay.classList.remove('active');
        });

        // Op√ß√µes de envio de comprovante ATUALIZADAS
        whatsappOption.addEventListener('click', () => {
            const orderSummary = generateReceiptMessage();
            copyMessageBox.textContent = orderSummary;
            copyMessageContainer.style.display = 'block';
            
            // Atualizar bot√µes para WhatsApp
            openAppBtn.innerHTML = '<i class="fab fa-whatsapp"></i> Abrir WhatsApp';
            openAppBtn.onclick = () => {
                const encodedMessage = encodeURIComponent(orderSummary);
                window.open(`https://wa.me/5522981636278?text=${encodedMessage}`, '_blank');
            };
        });

        instagramOption.addEventListener('click', () => {
            const orderSummary = generateReceiptMessage();
            copyMessageBox.textContent = orderSummary;
            copyMessageContainer.style.display = 'block';
            
            // Atualizar bot√µes para Instagram
            openAppBtn.innerHTML = '<i class="fab fa-instagram"></i> Abrir Instagram';
            openAppBtn.onclick = () => {
                // Instagram n√£o tem API direta, ent√£o apenas mostra mensagem para copiar
                alert('Copie a mensagem acima e envie para @o.dz.dev no Instagram!');
            };
        });

        discordOption.addEventListener('click', () => {
            const orderSummary = generateReceiptMessage();
            copyMessageBox.textContent = orderSummary;
            copyMessageContainer.style.display = 'block';
            
            // Atualizar bot√µes para Discord
            openAppBtn.innerHTML = '<i class="fab fa-discord"></i> Abrir Discord';
            openAppBtn.onclick = () => {
                window.open('https://discord.gg/PmN9QYFvvQ', '_blank');
                alert('Entre no servidor do Discord e abra um ticket na categoria de suporte!');
            };
        });

        copyMessageBtn.addEventListener('click', () => {
            const text = copyMessageBox.textContent;
            navigator.clipboard.writeText(text).then(() => {
                copyMessageBtn.innerHTML = '<i class="fas fa-check"></i> Copiado!';
                setTimeout(() => {
                    copyMessageBtn.innerHTML = '<i class="fas fa-copy"></i> Copiar Mensagem';
                }, 2000);
            });
        });

        // Gerar mensagem para o comprovante
        function generateReceiptMessage() {
            const totals = calculateCartTotals();
            let message = `BLACKDZ STORE - COMPROVANTE DE PAGAMENTO\n\n`;
            message += `Cliente: ${currentUser.username}\n`;
            message += `Data: ${new Date().toLocaleString('pt-BR')}\n\n`;
            message += `PRODUTOS:\n`;
            
            cart.forEach(item => {
                message += `‚Ä¢ ${item.name} x${item.quantity} - R$ ${(item.price * item.quantity).toFixed(2)}\n`;
            });
            
            message += `\nRESUMO:\n`;
            message += `Subtotal: R$ ${totals.subtotal.toFixed(2)}\n`;
            if (currentCoupon) {
                message += `Desconto (${currentCoupon.code}): -R$ ${totals.discount.toFixed(2)}\n`;
            }
            message += `TOTAL: R$ ${totals.total.toFixed(2)}\n\n`;
            message += `CHAVE PIX: 22981636278\n`;
            message += `VALOR A PAGAR: R$ ${totals.total.toFixed(2)}\n\n`;
            message += `Pagamento realizado em: [DATA E HORA DO PAGAMENTO]\n`;
            message += `Comprovante anexado/confirmado.`;
            
            return message;
        }

        // Sistema de pedir jogo
        requestGameBtn.addEventListener('click', () => {
            const gameName = gameSearchInput.value.trim();
            let message = 'Ol√° BlackDz Store! Gostaria de consultar o pre√ßo de um jogo da Steam';
            
            if (gameName) {
                message = `Ol√° BlackDz Store! Gostaria de saber o pre√ßo do jogo: ${gameName}`;
                gameSearchInput.value = '';
            }
            
            const encodedMessage = encodeURIComponent(message);
            window.open(`https://wa.me/5522981636278?text=${encodedMessage}`, '_blank');
        });

        requestItemBtn.addEventListener('click', () => {
            const message = 'Ol√° BlackDz Store! Gostaria de solicitar um item espec√≠fico para a loja.';
            const encodedMessage = encodeURIComponent(message);
            window.open(`https://wa.me/5522981636278?text=${encodedMessage}`, '_blank');
        });

        // Menu mobile
        mobileMenuBtn.addEventListener('click', () => {
            navLinks.classList.toggle('active');
        });

        // Tabs do admin
        adminTabs.forEach(tab => {
            tab.addEventListener('click', function() {
                const tabName = this.getAttribute('data-tab');
                
                adminTabs.forEach(t => t.classList.remove('active'));
                adminContents.forEach(c => c.classList.remove('active'));
                
                this.classList.add('active');
                document.getElementById(`${tabName}-content`).classList.add('active');
                
                // Se for a aba de criar cupom, popular select de usu√°rios
                if (tabName === 'create-coupon') {
                    populateUserSelect();
                }
            });
        });

        // Chat do admin
        sendMessageBtn.addEventListener('click', sendChatMessage);

        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendChatMessage();
            }
        });

        // Sistema de cria√ß√£o de cupom
        createCouponBtn.addEventListener('click', createNewCoupon);

        // Controle de cupom restrito
        couponRestricted.addEventListener('change', function() {
            if (this.checked) {
                authorizedUsersSection.style.display = 'block';
                populateUserSelect();
            } else {
                authorizedUsersSection.style.display = 'none';
            }
        });

        // Adicionar usu√°rio autorizado
        addUserBtn.addEventListener('click', function() {
            const userId = parseInt(addUserSelect.value);
            if (!userId) {
                alert('Selecione um usu√°rio!');
                return;
            }
            
            const user = userSystem.getUserById(userId);
            if (!user) return;
            
            // Verificar se j√° est√° na lista
            const existing = authorizedUsersList.querySelector(`[data-user-id="${userId}"]`);
            if (existing) {
                alert('Este usu√°rio j√° est√° na lista!');
                return;
            }
            
            const userElement = document.createElement('div');
            userElement.className = 'authorized-user';
            userElement.setAttribute('data-user-id', userId);
            userElement.innerHTML = `
                <span>${user.username} (${user.email})</span>
                <button class="btn btn-danger remove-user-btn" style="padding: 2px 8px; font-size: 0.7rem;">
                    <i class="fas fa-times"></i>
                </button>
            `;
            
            authorizedUsersList.appendChild(userElement);
            
            // Adicionar evento de remo√ß√£o
            userElement.querySelector('.remove-user-btn').addEventListener('click', function() {
                userElement.remove();
            });
            
            addUserSelect.value = '';
        });

        // Chatbot ATUALIZADO
        chatbotToggle.addEventListener('click', () => {
            chatbotWindow.classList.toggle('active');
            chatbotToggle.classList.toggle('active');
        });

        closeChatbot.addEventListener('click', () => {
            chatbotWindow.classList.remove('active');
            chatbotToggle.classList.remove('active');
        });

        sendChatbotMessage.addEventListener('click', sendChatbotMessageFunc);

        chatbotInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendChatbotMessageFunc();
            }
        });

        function sendChatbotMessageFunc() {
            const message = chatbotInput.value.trim();
            if (!message) return;
            
            displayChatbotMessage(message, true);
            chatbotInput.value = '';
            
            // Simular digita√ß√£o
            const typingDiv = document.createElement('div');
            typingDiv.className = 'chatbot-typing';
            typingDiv.innerHTML = `
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
            `;
            chatbotMessages.appendChild(typingDiv);
            chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
            
            // Gerar resposta inteligente
            setTimeout(() => {
                chatbotMessages.removeChild(typingDiv);
                const response = chatbot.generateResponse(message);
                displayChatbotMessage(response, false);
                
                // Salvar no hist√≥rico do admin
                adminSystem.addChatbotMessage(message, response);
            }, 1000 + Math.random() * 1000);
        }

        // Confirmar pagamento / criar pedido no sistema
        confirmPaymentBtn.addEventListener('click', () => {
            if (!currentUser) {
                alert('Fa√ßa login para confirmar o pagamento.');
                return;
            }
            if (cart.length === 0) {
                alert('Carrinho vazio.');
                return;
            }

            const totals = calculateCartTotals();
            const orderData = {
                userId: currentUser.id,
                userName: currentUser.username,
                items: JSON.parse(JSON.stringify(cart)),
                subtotal: totals.subtotal,
                discount: totals.discount,
                total: totals.total
            };

            const order = adminSystem.createOrder(orderData);

            // Marcar cupom como usado se aplic√°vel
            if (currentCoupon) {
                adminSystem.useCoupon(currentCoupon.code, currentUser.id);
            }

            // Limpar carrinho ap√≥s registro do pedido
            cart = [];
            currentCoupon = null;
            saveCartToStorage();
            updateCart();

            // Atualizar admin orders se admin estiver logado
            if (currentUser && userSystem.isAdmin(currentUser.username)) {
                loadAdminOrders();
            }

            alert(`Pagamento registrado. Pedido #${order.id} criado com sucesso! Guarde o n√∫mero do pedido.`);
            checkoutModal.classList.remove('active');
            overlay.classList.remove('active');
        });

        // Inicializar
        initLoginSystem();
        
        if (currentUser) {
            initializeProducts();
            updateCart();
        }

        // Configurar PIX
        pixKeyElement.textContent = `22981636278`;

        // Fun√ß√µes globais para admin (expostas para bot√µes inline)
        window.viewOrderDetails = function(orderId) {
            const orders = adminSystem.getOrders();
            const order = orders.find(o => o.id === orderId);
            
            if (order) {
                let details = `Pedido #${order.id}\n`;
                details += `Cliente: ${order.userName}\n`;
                details += `Data: ${new Date(order.createdAt).toLocaleString('pt-BR')}\n`;
                details += `Status: ${order.status}\n`;
                details += `Subtotal: R$ ${order.subtotal ? order.subtotal.toFixed(2) : '0.00'}\n`;
                details += `Desconto: R$ ${order.discount ? order.discount.toFixed(2) : '0.00'}\n`;
                details += `Total: R$ ${order.total ? order.total.toFixed(2) : '0.00'}\n\n`;
                details += `Produtos:\n`;
                
                if (order.items) {
                    order.items.forEach(item => {
                        details += `‚Ä¢ ${item.name} x${item.quantity} - R$ ${(item.price * item.quantity).toFixed(2)}\n`;
                    });
                } else {
                    details += `‚Ä¢ Detalhes dos produtos n√£o dispon√≠veis\n`;
                }
                
                alert(details);
            }
        };

        window.updateOrderStatus = function(orderId, status) {
            if (adminSystem.updateOrderStatus(orderId, status)) {
                loadAdminOrders();
                alert(`Pedido #${orderId} atualizado para: ${status === 'completed' ? 'Conclu√≠do' : 'Cancelado'}`);
            }
        };

        window.toggleCoupon = function(code) {
            const newStatus = adminSystem.toggleCoupon(code);
            loadAdminCoupons();
            alert(`Cupom ${code} ${newStatus ? 'ativado' : 'desativado'} com sucesso!`);
        };

        window.makeUserAdmin = function(userId) {
            if (userSystem.makeAdmin(userId)) {
                loadAdminUsers();
                alert('Usu√°rio promovido a administrador!');
            } else {
                alert('Erro ao promover usu√°rio.');
            }
        };

        window.removeUserAdmin = function(userId) {
            if (userSystem.removeAdmin(userId)) {
                loadAdminUsers();
                alert('Administrador removido do usu√°rio!');
            } else {
                alert('Erro ao remover administrador.');
            }
        };

        // Ver detalhes do usu√°rio (exibe senha apenas para admin)
        window.viewUserDetails = function(userId) {
            const user = userSystem.getUserById(userId);
            if (!user) {
                alert('Usu√°rio n√£o encontrado.');
                return;
            }

            let details = `Usu√°rio: ${user.username}\n`;
            details += `Nome: ${user.name}\n`;
            details += `Email: ${user.email}\n`;
            details += `Criado em: ${new Date(user.createdAt).toLocaleString('pt-BR')}\n`;
            details += `Tipo: ${user.isAdmin ? 'Administrador' : 'Usu√°rio'}\n`;

            // Mostrar senha somente se o usu√°rio atual for admin
            if (currentUser && userSystem.isAdmin(currentUser.username)) {
                details += `Senha: ${user.password}\n`;
            }

            alert(details);
        };

        // Ver compras de um usu√°rio (lista todos os pedidos feitos por esse usu√°rio)
        window.viewUserOrders = function(userId) {
            const orders = adminSystem.getOrders().filter(o => o.userId === userId);
            if (!orders || orders.length === 0) {
                alert('Nenhum pedido encontrado para este usu√°rio.');
                return;
            }

            let out = `Pedidos do usu√°rio (ID ${userId}):\n\n`;
            orders.forEach(o => {
                out += `Pedido #${o.id} - Total: R$ ${o.total.toFixed(2)} - Status: ${o.status} - Data: ${new Date(o.createdAt).toLocaleString('pt-BR')}\n`;
            });

            alert(out);
        };

        /* ===========================
           THEME / PERSONALIZA√á√ÉO LOGIC
           =========================== */

        // Theme state in localStorage key
        const THEME_KEY = 'blackdz_theme';

        function getStoredTheme() {
            try {
                const raw = localStorage.getItem(THEME_KEY);
                if (!raw) return null;
                return JSON.parse(raw);
            } catch(e) {
                return null;
            }
        }

        function storeTheme(themeObj) {
            localStorage.setItem(THEME_KEY, JSON.stringify(themeObj));
        }

        function applyTheme(themeObj) {
            // themeObj can include: primary, primaryDark, secondary, gradientStart, gradientEnd, bgUrl
            if (!themeObj) return;
            const r = document.documentElement.style;
            if (themeObj.primary) r.setProperty('--primary', themeObj.primary);
            if (themeObj.primaryDark) r.setProperty('--primary-dark', themeObj.primaryDark);
            if (themeObj.secondary) r.setProperty('--secondary', themeObj.secondary);
            if (themeObj.dark) r.setProperty('--dark', themeObj.dark);
            if (themeObj.light) r.setProperty('--light', themeObj.light);
            if (themeObj.gradientStart && themeObj.gradientEnd) {
                const g = `linear-gradient(135deg, ${themeObj.gradientStart}, ${themeObj.gradientEnd})`;
                r.setProperty('--gamer-gradient', g);
            } else if (themeObj.gradientStart) {
                const g = `linear-gradient(135deg, ${themeObj.gradientStart}, var(--secondary))`;
                r.setProperty('--gamer-gradient', g);
            } else if (themeObj.gradientEnd) {
                const g = `linear-gradient(135deg, var(--primary), ${themeObj.gradientEnd})`;
                r.setProperty('--gamer-gradient', g);
            }

            // Apply background image (if provided). Keep the radial accents on top.
            if (themeObj.bgUrl) {
                // allow both url or dataURL
                document.body.style.backgroundImage = `url("${themeObj.bgUrl}"), radial-gradient(circle at 10% 20%, rgba(138, 43, 226, 0.1) 0%, transparent 20%), radial-gradient(circle at 90% 80%, rgba(0, 255, 136, 0.1) 0%, transparent 20%)`;
                document.body.style.backgroundSize = 'cover, cover, cover';
            } else {
                // fallback to default radial backgrounds
                document.body.style.backgroundImage = `radial-gradient(circle at 10% 20%, rgba(138, 43, 226, 0.1) 0%, transparent 20%), radial-gradient(circle at 90% 80%, rgba(0, 255, 136, 0.1) 0%, transparent 20%)`;
            }
        }

        function resetThemeToDefault() {
            const defaultTheme = {
                primary: '#8a2be2',
                primaryDark: '#6a1cb0',
                secondary: '#00ff88',
                gradientStart: '#8a2be2',
                gradientEnd: '#00ff88',
                bgUrl: ''
            };
            storeTheme(defaultTheme);
            applyTheme(defaultTheme);

            // reset inputs if modal open
            primaryColorInput.value = defaultTheme.primary;
            secondaryColorInput.value = defaultTheme.secondary;
            gradientStartInput.value = defaultTheme.gradientStart;
            gradientEndInput.value = defaultTheme.gradientEnd;
            bgUrlInput.value = '';
            bgFileInput.value = '';
        }

        // Initialize theme on load
        (function initTheme() {
            const stored = getStoredTheme();
            if (stored) {
                applyTheme(stored);

                // set color pickers values
                if (stored.primary) primaryColorInput.value = stored.primary;
                if (stored.secondary) secondaryColorInput.value = stored.secondary;
                if (stored.gradientStart) gradientStartInput.value = stored.gradientStart;
                if (stored.gradientEnd) gradientEndInput.value = stored.gradientEnd;
                if (stored.bgUrl) bgUrlInput.value = stored.bgUrl;
            } else {
                resetThemeToDefault();
            }
        })();

        // Open / close theme modal
        themeBtn.addEventListener('click', () => {
            const isActive = themeModal.classList.toggle('active');
            if (isActive) {
                overlay.classList.add('active');
                themeModal.setAttribute('aria-hidden', 'false');
            } else {
                overlay.classList.remove('active');
                themeModal.setAttribute('aria-hidden', 'true');
            }
        });
        closeThemeBtn.addEventListener('click', () => {
            themeModal.classList.remove('active');
            overlay.classList.remove('active');
            themeModal.setAttribute('aria-hidden', 'true');
        });

        // Presets click
        presetEls.forEach(el => {
            el.addEventListener('click', () => {
                try {
                    const data = JSON.parse(el.getAttribute('data-preset'));
                    if (data.primary) primaryColorInput.value = data.primary;
                    if (data.secondary) secondaryColorInput.value = data.secondary;
                    if (data.g1) gradientStartInput.value = data.g1;
                    if (data.g2) gradientEndInput.value = data.g2;
                    if (data.bg !== undefined) bgUrlInput.value = data.bg;
                } catch(e) { console.error(e); }
            });
        });

        // File upload handling
        bgFileInput.addEventListener('change', function() {
            const file = this.files && this.files[0];
            if (!file) return;
            const reader = new FileReader();
            reader.onload = function(ev) {
                const dataUrl = ev.target.result;
                bgUrlInput.value = dataUrl;
                // preview immediately
                const previewObj = {
                    primary: primaryColorInput.value,
                    primaryDark: primaryColorInput.value,
                    secondary: secondaryColorInput.value,
                    gradientStart: gradientStartInput.value,
                    gradientEnd: gradientEndInput.value,
                    bgUrl: dataUrl
                };
                applyTheme(previewObj);
            };
            reader.readAsDataURL(file);
        });

        // Preview button - applies but doesn't save
        previewThemeBtn.addEventListener('click', () => {
            const previewObj = {
                primary: primaryColorInput.value,
                primaryDark: primaryColorInput.value,
                secondary: secondaryColorInput.value,
                gradientStart: gradientStartInput.value,
                gradientEnd: gradientEndInput.value,
                bgUrl: bgUrlInput.value.trim()
            };
            applyTheme(previewObj);
        });

        // Apply button - saves to localStorage
        applyThemeBtn.addEventListener('click', () => {
            const themeObj = {
                primary: primaryColorInput.value,
                primaryDark: primaryColorInput.value,
                secondary: secondaryColorInput.value,
                gradientStart: gradientStartInput.value,
                gradientEnd: gradientEndInput.value,
                bgUrl: bgUrlInput.value.trim()
            };
            storeTheme(themeObj);
            applyTheme(themeObj);
            alert('Tema aplicado e salvo localmente!');
            themeModal.classList.remove('active');
            overlay.classList.remove('active');
            themeModal.setAttribute('aria-hidden', 'true');
        });

        // Reset theme button
        resetThemeBtn.addEventListener('click', () => {
            if (!confirm('Deseja realmente resetar o tema para as cores padr√£o?')) return;
            resetThemeToDefault();
            alert('Tema resetado para o padr√£o.');
        });

        // When user logs out, do not clear theme (persist across sessions)
        // If you want to clear theme on logout, uncomment below:
        // logoutBtn.addEventListener('click', () => { localStorage.removeItem(THEME_KEY); resetThemeToDefault(); });

    </script>
<script src="http://localhost:3001/socket.io/socket.io.js"></script>
<script src="integration.js"></script>
</body>
</html>